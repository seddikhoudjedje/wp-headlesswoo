"use strict";function vi_wn_b64DecodeUnicode(o){var t="";if(o)try{t=decodeURIComponent(atob(o).split("").map(function(o){return"%"+("00"+o.charCodeAt(0).toString(16)).slice(-2)}).join(""))}catch(t){return o}return t}function viSwipeDetect(o,t){var i,e,n,s,a,c,_=o,r=t||function(o){};_.addEventListener("touchstart",function(o){var t=o.changedTouches[0];i="none",e=t.pageX,n=t.pageY,c=(new Date).getTime()},!1),_.addEventListener("touchmove",function(o){o.preventDefault()},!1),_.addEventListener("touchend",function(o){var t=o.changedTouches[0];s=t.pageX-e,a=t.pageY-n,(new Date).getTime()-c<=300&&(Math.abs(s)>=150&&Math.abs(a)<=100?i=s<0?"left":"right":Math.abs(a)>=150&&Math.abs(s)<=100&&(i=a<0?"up":"down")),r(i)},!1)}jQuery(document).ready(function(o){if(o("#message-purchased").length>0){var t=woo_notification;0==_woocommerce_notification_params.billing&&0==_woocommerce_notification_params.detect&&t.detect_address(),viSwipeDetect(document.getElementById("message-purchased"),function(t){"none"!==t&&(parseInt(woo_notification.time_close)>0&&(o("#message-purchased").unbind(),woo_notification.setCookie("woo_notification_close",1,3600*parseInt(woo_notification.time_close))),woo_notification.message_hide(!1,t))})}}),jQuery(window).load(function(){var o=woo_notification;if(o.loop=_woocommerce_notification_params.loop,o.loop_session=_woocommerce_notification_params.loop_session,o.loop_session_duration=parseFloat(_woocommerce_notification_params.loop_session_duration),o.loop_session_total=parseInt(_woocommerce_notification_params.loop_session_total),o.init_delay=parseInt(_woocommerce_notification_params.initial_delay),o.total=parseInt(_woocommerce_notification_params.notification_per_page),o.display_time=parseInt(_woocommerce_notification_params.display_time),o.next_time=parseInt(_woocommerce_notification_params.next_time),o.ajax_url=_woocommerce_notification_params.ajax_url,o.products=_woocommerce_notification_params.products,o.messages=_woocommerce_notification_params.messages,o.image=_woocommerce_notification_params.image,o.redirect_target=_woocommerce_notification_params.redirect_target,o.time=_woocommerce_notification_params.time,o.display_effect=_woocommerce_notification_params.display_effect,o.hidden_effect=_woocommerce_notification_params.hidden_effect,o.messages=_woocommerce_notification_params.messages,o.names=_woocommerce_notification_params.names,o.detect=_woocommerce_notification_params.detect,o.billing=_woocommerce_notification_params.billing,o.in_the_same_cate=_woocommerce_notification_params.in_the_same_cate,o.message_custom=_woocommerce_notification_params.message_custom,o.message_number_min=_woocommerce_notification_params.message_number_min,o.message_number_max=_woocommerce_notification_params.message_number_max,o.time_close=_woocommerce_notification_params.time_close,o.show_close=_woocommerce_notification_params.show_close,0==_woocommerce_notification_params.billing&&0==_woocommerce_notification_params.detect){o.cities=[o.getCookie("wn_city")],o.country=[o.getCookie("wn_country")];var t=o.getCookie("wn_ip");t&&"undefined"!=t&&o.init()}else o.cities=_woocommerce_notification_params.cities,o.country=_woocommerce_notification_params.country,o.init()});var woo_notification={billing:0,in_the_same_cate:0,loop:0,loop_session:0,loop_session_duration:3600,loop_session_total:30,timeOutShow:0,timeOutHide:0,init_delay:5,total:30,display_time:5,next_time:60,count:0,intel:0,wn_popup:0,id:0,messages:"",products:"",ajax_url:"",display_effect:"",hidden_effect:"",time:"",names:"",cities:"",country:"",message_custom:"",message_number_min:"",message_number_max:"",detect:0,time_close:0,show_close:0,shortcodes:["{first_name}","{city}","{state}","{country}","{product}","{product_with_link}","{time_ago}","{custom}"],init:function(){if(1==this.loop&&1==this.loop_session){var o=this.getCookie("woo_notification_session"),t=Date.now(),i=this.getCookie("woo_notification_displaying");if(i)return void(this.timeOutShow=setTimeout(function(){woo_notification.init()},i-t));if(o){var e=o.split(":"),n=parseInt(e[0]),s=e[1]-t;if(n>=this.loop_session_total)return void(this.timeOutShow=setTimeout(function(){woo_notification.init()},s))}}this.ajax_url?this.ajax_get_data():setTimeout(function(){woo_notification.get_product()},1e3*this.init_delay),jQuery("#message-purchased").on("mouseenter",function(){window.clearTimeout(woo_notification.wn_popup),window.clearTimeout(woo_notification.timeOutShow),window.clearTimeout(woo_notification.timeOutHide)}).on("mouseleave",function(){woo_notification.message_show(!0)})},detect_address:function(){this.getCookie("wn_ip")||jQuery.getJSON("https://extreme-ip-lookup.com/json/",function(o){o.query&&woo_notification.setCookie("wn_ip",o.query,86400),o.city&&woo_notification.setCookie("wn_city",o.city,86400),o.country&&woo_notification.setCookie("wn_country",o.country,86400)})},ajax_get_data:function(){var o;this.ajax_url&&!this.getCookie("woo_notification_close")&&(o=this.id?"&id="+this.id:"",jQuery.ajax({type:"POST",data:"action=woonotification_get_product"+o,url:this.ajax_url,success:function(o){var t=jQuery.parseJSON(o);t&&"undefined"!=t&&t.length>0&&(woo_notification.products=t,woo_notification.message_show(),setTimeout(function(){woo_notification.get_product()},1e3*woo_notification.init_delay))},error:function(o){}}))},message_show:function(o=!1){var t=jQuery("#message-purchased");if(o||(this.count++,this.audio()),1==this.loop&&1==this.loop_session){var i=this.getCookie("woo_notification_session"),e=1,n=1e3*this.loop_session_duration,s=Date.now(),a=s+n,c=this.getCookie("woo_notification_displaying");if(window.clearTimeout(this.timeOutHide),!o){if(c)return window.clearTimeout(this.timeOutShow),void(this.timeOutShow=setTimeout(function(){woo_notification.get_product()},c-s));if(i){var _=i.split(":");if(e=parseInt(_[0]),n=(a=_[1])-s,e>=this.loop_session_total)return window.clearTimeout(this.timeOutShow),void(this.timeOutShow=setTimeout(function(){woo_notification.get_product()},n));e++}this.setCookieNew("woo_notification_session",a,e+":"+a,!0)}this.timeOutHide=setTimeout(function(){woo_notification.message_hide()},1e3*this.display_time),this.setCookieNew("woo_notification_displaying",this.display_time+this.next_time),t.hasClass(this.hidden_effect)&&t.removeClass(this.hidden_effect),t.addClass(this.display_effect).css("display","flex")}else this.wn_popup=setTimeout(function(){woo_notification.message_hide()},1e3*this.display_time),window.clearInterval(this.intel),t.hasClass(this.hidden_effect)&&t.removeClass(this.hidden_effect),t.addClass(this.display_effect).css("display","flex")},message_hide:function(o=!1,t=""){var i=jQuery("#message-purchased");switch(i.hasClass(this.display_effect)&&i.removeClass(this.display_effect),t){case"left":i.addClass("bounceOutLeft");break;case"right":i.addClass("bounceOutRight");break;case"up":i.addClass("bounceOutUp");break;case"down":i.addClass("bounceOutDown");break;default:i.addClass(this.hidden_effect)}if(i.fadeOut(1e3),!o&&!this.getCookie("woo_notification_close")){var e=this.count;if(1==this.loop)if(1==this.loop_session){var n=this.getCookie("woo_notification_session"),s=1,a=1e3*this.loop_session_duration;this.getCookie("woo_notification_displaying");if(window.clearTimeout(this.timeOutHide),window.clearTimeout(this.timeOutShow),n){var c=new Date,_=n.split(":");if(s=_[0],a=_[1]-c.getTime(),s>=this.loop_session_total)return void(this.timeOutShow=setTimeout(function(){woo_notification.get_product()},a))}this.total>e?this.timeOutShow=setTimeout(function(){woo_notification.get_product()},1e3*this.next_time):this.timeOutShow=setTimeout(function(){woo_notification.get_product()},a)}else this.total>e&&(window.clearTimeout(this.wn_popup),this.intel=setInterval(function(){woo_notification.get_product()},1e3*this.next_time));else window.clearTimeout(this.wn_popup),window.clearInterval(this.intel)}},get_time_string:function(){var o=this.random(0,3600*this.time),t=parseFloat(o/86400);return t>1?1==(t=parseInt(t))?t+" "+_woocommerce_notification_params.str_day:t+" "+_woocommerce_notification_params.str_days:(t=parseFloat(o/3600))>1?1==(t=parseInt(t))?t+" "+_woocommerce_notification_params.str_hour:t+" "+_woocommerce_notification_params.str_hours:(t=parseFloat(o/60))>1?1==(t=parseInt(t))?t+" "+_woocommerce_notification_params.str_min:t+" "+_woocommerce_notification_params.str_mins:t<10?_woocommerce_notification_params.str_few_sec:(t=parseInt(t))+" "+_woocommerce_notification_params.str_secs},get_product:function(){var o,t,i,e,n,s,a=this.products,c=this.messages,_=this.image,r=this.redirect_target;if("undefined"!=a&&a&&c&&a.length>0&&c.length>0){var m=c[s=woo_notification.random(0,c.length-1)],u=a[s=woo_notification.random(0,a.length-1)];parseInt(this.billing)>0&&parseInt(this.in_the_same_cate)<1?(o=vi_wn_b64DecodeUnicode(u.first_name),e=vi_wn_b64DecodeUnicode(u.city),t=vi_wn_b64DecodeUnicode(u.state),i=vi_wn_b64DecodeUnicode(u.country),n=u.time):(this.names&&"undefined"!=this.names?(s=woo_notification.random(0,this.names.length-1),o=vi_wn_b64DecodeUnicode(this.names[s])):o="",this.cities&&"undefined"!=this.cities?(s=woo_notification.random(0,this.cities.length-1),e=vi_wn_b64DecodeUnicode(this.cities[s])):e="",t="",i=this.country,n=this.get_time_string());var d='<span class="wn-popup-product-title">'+u.title+"</span>",f='<a class="wn-popup-product-title-with-link"';"1"===r&&(f+='target="_blank"'),f+=' href="'+u.url+'">'+u.title+"</a>";var p="<small>"+_woocommerce_notification_params.str_about+" "+n+" "+_woocommerce_notification_params.str_ago+" </small>",h=this.message_custom,l="";u.thumb?(jQuery("#message-purchased").addClass("wn-product-with-image").removeClass("wn-product-without-image"),"1"===_?(l='<a class="wn-notification-image-wrapper" ',"1"===r&&(l+='target="_blank"'),l+=' href="'+u.url+'"><img class="wn-notification-image" src="'+u.thumb+'"></a>'):l='<span class="wn-notification-image-wrapper"><img class="wn-notification-image" src="'+u.thumb+'"></span>'):jQuery("#message-purchased").addClass("wn-product-without-image").removeClass("wn-product-with-image"),h=h.replace("{number}",this.random(this.message_number_min,this.message_number_max));for(var w=this.shortcodes,g=[o,e,t,i,d,f,p,h],y=m,v=w.length-1;v>=0;v--)y=y.replace(w[v],g[v]);var b="";parseInt(this.show_close)>0&&(b='<div id="notify-close"></div>');var C=l+'<p class="wn-notification-message-container">'+y+"</p>";jQuery("#message-purchased").html('<div class="message-purchase-main">'+C+"</div>"+b),this.close_notify(),woo_notification.message_show()}},close_notify:function(){jQuery("#notify-close").unbind(),jQuery("#notify-close").bind("click",function(o){woo_notification.message_hide(!0),parseInt(woo_notification.time_close)>0&&(jQuery("#message-purchased").unbind(),woo_notification.setCookie("woo_notification_close",1,3600*parseInt(woo_notification.time_close)))})},audio:function(){if(jQuery("#woocommerce-notification-audio").length>0){var o=document.getElementById("woocommerce-notification-audio"),t=function(){o.play().then(function(){setTimeout(function(){o.stop()},0)}),document.removeEventListener("touchstart",t,!1)};document.addEventListener("touchstart",t,!1),o.play()}},random:function(o,t){o=parseInt(o),t=parseInt(t);var i=Math.random()*(t-o);return Math.round(i)+o},setCookie:function(o,t,i){var e=new Date;e.setTime(e.getTime()+1e3*i);var n="expires="+e.toUTCString();document.cookie=o+"="+t+";"+n+";path=/"},setCookieNew:function(o,t,i="",e=!1){var n=new Date,s=n.getTime()+1e3*t;e&&(s=t),n.setTime(s),i||(i=s),document.cookie=o+"="+i+";expires="+n.toUTCString()+";path=/"},getCookie:function(o){for(var t=o+"=",i=decodeURIComponent(document.cookie).split(";"),e=0;e<i.length;e++){for(var n=i[e];" "==n.charAt(0);)n=n.substring(1);if(0==n.indexOf(t))return n.substring(t.length,n.length)}return""}};