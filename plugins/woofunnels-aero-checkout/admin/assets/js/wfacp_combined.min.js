!function(t){t.fn.xlAjaxChosen=function(e,n,a){var r,s,l,o;return null==e&&(e={}),null==a&&(a={}),s={minTermLength:3,afterTypeDelay:500,jsonTermKey:"term",keepTypingMsg:"Keep typing...",lookingForMsg:"Looking for"},o=this,r=null,l=t.extend({},s,t(o).data(),e),this.xlChosen(a||{}),this.each(function(){return t(this).next(".chosen-container").find(".search-field > input, .chosen-search > input").bind("keyup",function(){var a,s,u,c;if(cmb2_select_last_interact=t(this).parents(".chosen-container").prev("select"),u=t(this).val(),s=(c=t.trim(t(this).val())).length<l.minTermLength?l.keepTypingMsg:l.lookingForMsg+" '"+c+"'",o.next(".chosen-container").find(".no-results").text(s),0!==c.length)return c!==t(this).data("prevVal")&&(t(this).data("prevVal",c),this.timer&&clearTimeout(this.timer),!(c.length<l.minTermLength)&&(a=t(this),null==l.data&&(l.data={}),l.data[l.jsonTermKey]=c,null!=l.dataCallback&&(l.data=l.dataCallback(l.data)),l.success,l.success=function(r){var i,s,l;if(o=cmb2_select_last_interact,null!=r)return l=[],o.find("option").each(function(){return t(this).is(":selected")?l.push(t(this).val()+"-"+t(this).text()):t(this).remove()}),o.find("optgroup:empty").each(function(){return t(this).remove()}),i=null!=n?n(r,a):r,s=0,t.each(i,function(e,n){var a,r,i;return s++,n.group?((a=o.find("optgroup[label='"+n.text+"']")).size()||(a=t("<optgroup />")),a.attr("label",n.text).appendTo(o),t.each(n.items,function(e,n){var r,i;if(r="string"==typeof n?(i=e,n):(i=n.value,n.text),-1===t.inArray(i+"-"+r,l))return t("<option />").attr("value",i).html(r).appendTo(a)})):(r="string"==typeof n?(i=e,n):(i=n.value,n.text),-1===t.inArray(i+"-"+r,l)?t("<option />").attr("value",i).html(r).appendTo(o):void 0)}),s?o.trigger("chosen:updated"):(o.data().chosen.no_results_clear(),o.data().chosen.no_results(a.val())),null!=e.success&&e.success(r),a.val(u)},this.timer=setTimeout(function(){return r&&r.abort(),r=t.ajax(l)},l.afterTypeDelay)));selected_values_pre=[],o.find("option").each(function(){return t(this).is(":selected")?selected_values_pre.push(t(this).val()+"-"+t(this).text()):t(this).remove()});var h=[];return void 0!==o.attr("data-pre-data")&&(h=JSON.parse(o.attr("data-pre-data"))),t.each(h,function(e,n){if(text="string"==typeof n?(value=i,n):(value=n.value,n.text),-1===t.inArray(value+"-"+text,selected_values_pre))return t("<option />").attr("value",value).html(text).appendTo(o)}),o.trigger("chosen:updated"),!1})})}}(jQuery);

(function(){var t,e,s,i,r={}.hasOwnProperty;(i=function(){function t(){this.options_index=0,this.parsed=[]}return t.prototype.add_node=function(t){return"OPTGROUP"===t.nodeName.toUpperCase()?this.add_group(t):this.add_option(t)},t.prototype.add_group=function(t){var e,s,i,r,l,o;for(e=this.parsed.length,this.parsed.push({array_index:e,group:!0,label:this.escapeExpression(t.label),children:0,disabled:t.disabled}),o=[],i=0,r=(l=t.childNodes).length;i<r;i++)s=l[i],o.push(this.add_option(s,e,t.disabled));return o},t.prototype.add_option=function(t,e,s){if("OPTION"===t.nodeName.toUpperCase())return""!==t.text?(null!=e&&(this.parsed[e].children+=1),this.parsed.push({array_index:this.parsed.length,options_index:this.options_index,value:t.value,text:t.text,html:t.innerHTML,selected:t.selected,disabled:!0===s?s:t.disabled,group_array_index:e,classes:t.className,style:t.style.cssText})):this.parsed.push({array_index:this.parsed.length,options_index:this.options_index,empty:!0}),this.options_index+=1},t.prototype.escapeExpression=function(t){var e,s;return null==t||!1===t?"":/[\&\<\>\"\'\`]/.test(t)?(e={"<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#x27;","`":"&#x60;"},s=/&(?!\w+;)|[\<\>\"\'\`]/g,t.replace(s,function(t){return e[t]||"&amp;"})):t},t}()).select_to_array=function(t){var e,s,r,l,o;for(s=new i,r=0,l=(o=t.childNodes).length;r<l;r++)e=o[r],s.add_node(e);return s.parsed},e=function(){function t(e,s){this.form_field=e,this.options=null!=s?s:{},t.browser_is_supported()&&(this.is_multiple=this.form_field.multiple,this.set_default_text(),this.set_default_values(),this.setup(),this.set_up_html(),this.register_observers())}return t.prototype.set_default_values=function(){var t=this;return this.click_test_action=function(e){return t.test_active_click(e)},this.activate_action=function(e){return t.activate_field(e)},this.active_field=!1,this.mouse_on_container=!1,this.results_showing=!1,this.result_highlighted=null,this.result_single_selected=null,this.allow_single_deselect=null!=this.options.allow_single_deselect&&null!=this.form_field.options[0]&&""===this.form_field.options[0].text&&this.options.allow_single_deselect,this.disable_search_threshold=this.options.disable_search_threshold||0,this.disable_search=this.options.disable_search||!1,this.enable_split_word_search=null==this.options.enable_split_word_search||this.options.enable_split_word_search,this.group_search=null==this.options.group_search||this.options.group_search,this.search_contains=this.options.search_contains||!1,this.single_backstroke_delete=null==this.options.single_backstroke_delete||this.options.single_backstroke_delete,this.max_selected_options=this.options.max_selected_options||1/0,this.inherit_select_classes=this.options.inherit_select_classes||!1,this.display_selected_options=null==this.options.display_selected_options||this.options.display_selected_options,this.display_disabled_options=null==this.options.display_disabled_options||this.options.display_disabled_options},t.prototype.set_default_text=function(){return this.form_field.getAttribute("data-placeholder")?this.default_text=this.form_field.getAttribute("data-placeholder"):this.is_multiple?this.default_text=this.options.placeholder_text_multiple||this.options.placeholder_text||t.default_multiple_text:this.default_text=this.options.placeholder_text_single||this.options.placeholder_text||t.default_single_text,this.results_none_found=this.form_field.getAttribute("data-no_results_text")||this.options.no_results_text||t.default_no_result_text},t.prototype.mouse_enter=function(){return this.mouse_on_container=!0},t.prototype.mouse_leave=function(){return this.mouse_on_container=!1},t.prototype.input_focus=function(t){var e=this;if(this.is_multiple){if(!this.active_field)return setTimeout(function(){return e.container_mousedown()},50)}else if(!this.active_field)return this.activate_field()},t.prototype.input_blur=function(t){var e=this;if(!this.mouse_on_container)return this.active_field=!1,setTimeout(function(){return e.blur_test()},100)},t.prototype.results_option_build=function(t){var e,s,i,r,l;for(e="",i=0,r=(l=this.results_data).length;i<r;i++)(s=l[i]).group?e+=this.result_add_group(s):e+=this.result_add_option(s),(null!=t?t.first:void 0)&&(s.selected&&this.is_multiple?this.choice_build(s):s.selected&&!this.is_multiple&&this.single_set_selected_text(s.text));return e},t.prototype.result_add_option=function(t){var e,s;return t.search_match&&this.include_option_in_results(t)?(e=[],!t.disabled&&(!t.selected||!this.is_multiple)&&e.push("active-result"),t.disabled&&(!t.selected||!this.is_multiple)&&e.push("disabled-result"),t.selected&&e.push("result-selected"),null!=t.group_array_index&&e.push("group-option"),""!==t.classes&&e.push(t.classes),s=""!==t.style.cssText?' style="'+t.style+'"':"",'<li class="'+e.join(" ")+'"'+s+' data-option-array-index="'+t.array_index+'">'+t.search_text+"</li>"):""},t.prototype.result_add_group=function(t){return(t.search_match||t.group_match)&&0<t.active_options?'<li class="group-result">'+t.search_text+"</li>":""},t.prototype.results_update_field=function(){if(this.set_default_text(),this.is_multiple||this.results_reset_cleanup(),this.result_clear_highlight(),this.result_single_selected=null,this.results_build(),this.results_showing)return this.winnow_results()},t.prototype.results_toggle=function(){return this.results_showing?this.results_hide():this.results_show()},t.prototype.results_search=function(t){return this.results_showing?this.winnow_results():this.results_show()},t.prototype.winnow_results=function(){var t,e,s,i,r,l,o,n,h,c,a,_,u;for(this.no_results_clear(),r=0,t=(o=this.get_search_text()).replace(/[-[\]{}()*+?.,\\^$|#\s]/g,"\\$&"),i=this.search_contains?"":"^",s=new RegExp(i+t,"i"),c=new RegExp(t,"i"),a=0,_=(u=this.results_data).length;a<_;a++)(e=u[a]).search_match=!1,l=null,this.include_option_in_results(e)&&(e.group&&(e.group_match=!1,e.active_options=0),null!=e.group_array_index&&this.results_data[e.group_array_index]&&(0===(l=this.results_data[e.group_array_index]).active_options&&l.search_match&&(r+=1),l.active_options+=1),e.group&&!this.group_search||(e.search_text=e.group?e.label:e.html,e.search_match=this.search_string_match(e.search_text,s),e.search_match&&!e.group&&(r+=1),e.search_match?(o.length&&(n=e.search_text.search(c),h=e.search_text.substr(0,n+o.length)+"</em>"+e.search_text.substr(n+o.length),e.search_text=h.substr(0,n)+"<em>"+h.substr(n)),null!=l&&(l.group_match=!0)):null!=e.group_array_index&&this.results_data[e.group_array_index].search_match&&(e.search_match=!0)));return this.result_clear_highlight(),r<1&&o.length?(this.update_results_content(""),this.no_results(o)):(this.update_results_content(this.results_option_build()),this.winnow_results_set_highlight())},t.prototype.search_string_match=function(t,e){var s,i,r,l;if(e.test(t))return!0;if(this.enable_split_word_search&&(0<=t.indexOf(" ")||0===t.indexOf("["))&&(i=t.replace(/\[|\]/g,"").split(" ")).length)for(r=0,l=i.length;r<l;r++)if(s=i[r],e.test(s))return!0},t.prototype.choices_count=function(){var t,e,s;if(null!=this.selected_option_count)return this.selected_option_count;for(t=this.selected_option_count=0,e=(s=this.form_field.options).length;t<e;t++)s[t].selected&&(this.selected_option_count+=1);return this.selected_option_count},t.prototype.choices_click=function(t){if(t.preventDefault(),!this.results_showing&&!this.is_disabled)return this.results_show()},t.prototype.keyup_checker=function(t){var e,s;switch(e=null!=(s=t.which)?s:t.keyCode,this.search_field_scale(),e){case 8:if(this.is_multiple&&this.backstroke_length<1&&0<this.choices_count())return this.keydown_backstroke();if(!this.pending_backstroke)return this.result_clear_highlight(),this.results_search();break;case 13:if(t.preventDefault(),this.results_showing)return this.result_select(t);break;case 27:return this.results_showing&&this.results_hide(),!0;case 9:case 38:case 40:case 16:case 91:case 17:break;default:return this.results_search()}},t.prototype.container_width=function(){return null!=this.options.width?this.options.width:this.form_field.offsetWidth+"px"},t.prototype.include_option_in_results=function(t){return!(this.is_multiple&&!this.display_selected_options&&t.selected||!this.display_disabled_options&&t.disabled||t.empty)},t.browser_is_supported=function(){return"Microsoft Internet Explorer"===window.navigator.appName?8<=document.documentMode:!(/iP(od|hone)/i.test(window.navigator.userAgent)||/Android/i.test(window.navigator.userAgent)&&/Mobile/i.test(window.navigator.userAgent))},t.default_multiple_text="Select Some Options",t.default_single_text="Select an Option",t.default_no_result_text="No results match",t}(),(t=jQuery).fn.extend({xlChosen:function(i){return e.browser_is_supported()?this.each(function(e){var r,l;l=(r=t(this)).data("chosen"),"destroy"===i&&l?l.destroy():l||r.data("chosen",new s(this,i))}):this}}),s=function(s){function l(){return l.__super__.constructor.apply(this,arguments)}return function(t,e){function s(){this.constructor=t}for(var i in e)r.call(e,i)&&(t[i]=e[i]);s.prototype=e.prototype,t.prototype=new s,t.__super__=e.prototype}(l,e),l.prototype.setup=function(){return this.form_field_jq=t(this.form_field),this.current_selectedIndex=this.form_field.selectedIndex,this.is_rtl=this.form_field_jq.hasClass("chosen-rtl")},l.prototype.set_up_html=function(){var e,s;return(e=["chosen-container"]).push("chosen-container-"+(this.is_multiple?"multi":"single")),this.inherit_select_classes&&this.form_field.className&&e.push(this.form_field.className),this.is_rtl&&e.push("chosen-rtl"),s={class:e.join(" "),style:"width: "+this.container_width()+";",title:this.form_field.title},this.form_field.id.length&&(s.id=this.form_field.id.replace(/[^\w]/g,"_")+"_chosen"),this.container=t("<div />",s),this.is_multiple?this.container.html('<ul class="chosen-choices"><li class="search-field"><input type="text" value="'+this.default_text+'" class="default" autocomplete="off" style="width:25px;" /></li></ul><div class="chosen-drop"><ul class="chosen-results"></ul></div>'):this.container.html('<a class="chosen-single chosen-default" tabindex="-1"><span>'+this.default_text+'</span><div><b></b></div></a><div class="chosen-drop"><div class="chosen-search"><input type="text" autocomplete="off" /></div><ul class="chosen-results"></ul></div>'),this.form_field_jq.hide().after(this.container),this.dropdown=this.container.find("div.chosen-drop").first(),this.search_field=this.container.find("input").first(),this.search_results=this.container.find("ul.chosen-results").first(),this.search_field_scale(),this.search_no_results=this.container.find("li.no-results").first(),this.is_multiple?(this.search_choices=this.container.find("ul.chosen-choices").first(),this.search_container=this.container.find("li.search-field").first()):(this.search_container=this.container.find("div.chosen-search").first(),this.selected_item=this.container.find(".chosen-single").first()),this.results_build(),this.set_tab_index(),this.set_label_behavior(),this.form_field_jq.trigger("chosen:ready",{chosen:this})},l.prototype.register_observers=function(){var t=this;return this.container.bind("mousedown.chosen",function(e){t.container_mousedown(e)}),this.container.bind("mouseup.chosen",function(e){t.container_mouseup(e)}),this.container.bind("mouseenter.chosen",function(e){t.mouse_enter(e)}),this.container.bind("mouseleave.chosen",function(e){t.mouse_leave(e)}),this.search_results.bind("mouseup.chosen",function(e){t.search_results_mouseup(e)}),this.search_results.bind("mouseover.chosen",function(e){t.search_results_mouseover(e)}),this.search_results.bind("mouseout.chosen",function(e){t.search_results_mouseout(e)}),this.search_results.bind("mousewheel.chosen DOMMouseScroll.chosen",function(e){t.search_results_mousewheel(e)}),this.form_field_jq.bind("chosen:updated.chosen",function(e){t.results_update_field(e)}),this.form_field_jq.bind("chosen:activate.chosen",function(e){t.activate_field(e)}),this.form_field_jq.bind("chosen:open.chosen",function(e){t.container_mousedown(e)}),this.search_field.bind("blur.chosen",function(e){t.input_blur(e)}),this.search_field.bind("keyup.chosen",function(e){t.keyup_checker(e)}),this.search_field.bind("keydown.chosen",function(e){t.keydown_checker(e)}),this.search_field.bind("focus.chosen",function(e){t.input_focus(e)}),this.is_multiple?this.search_choices.bind("click.chosen",function(e){t.choices_click(e)}):this.container.bind("click.chosen",function(t){t.preventDefault()})},l.prototype.destroy=function(){return t(document).unbind("click.chosen",this.click_test_action),this.search_field[0].tabIndex&&(this.form_field_jq[0].tabIndex=this.search_field[0].tabIndex),this.container.remove(),this.form_field_jq.removeData("chosen"),this.form_field_jq.show()},l.prototype.search_field_disabled=function(){return this.is_disabled=this.form_field_jq[0].disabled,this.is_disabled?(this.container.addClass("chosen-disabled"),this.search_field[0].disabled=!0,this.is_multiple||this.selected_item.unbind("focus.chosen",this.activate_action),this.close_field()):(this.container.removeClass("chosen-disabled"),this.search_field[0].disabled=!1,this.is_multiple?void 0:this.selected_item.bind("focus.chosen",this.activate_action))},l.prototype.container_mousedown=function(e){if(!this.is_disabled&&(e&&"mousedown"===e.type&&!this.results_showing&&e.preventDefault(),null==e||!t(e.target).hasClass("search-choice-close")))return this.active_field?this.is_multiple||!e||t(e.target)[0]!==this.selected_item[0]&&!t(e.target).parents("a.chosen-single").length||(e.preventDefault(),this.results_toggle()):(this.is_multiple&&this.search_field.val(""),t(document).bind("click.chosen",this.click_test_action),this.results_show()),this.activate_field()},l.prototype.container_mouseup=function(t){if("ABBR"===t.target.nodeName&&!this.is_disabled)return this.results_reset(t)},l.prototype.search_results_mousewheel=function(t){var e,s,i;if(null!=(e=-(null!=(s=t.originalEvent)?s.wheelDelta:void 0)||(null!=(i=t.originialEvent)?i.detail:void 0)))return t.preventDefault(),"DOMMouseScroll"===t.type&&(e*=40),this.search_results.scrollTop(e+this.search_results.scrollTop())},l.prototype.blur_test=function(t){if(!this.active_field&&this.container.hasClass("chosen-container-active"))return this.close_field()},l.prototype.close_field=function(){return t(document).unbind("click.chosen",this.click_test_action),this.active_field=!1,this.results_hide(),this.container.removeClass("chosen-container-active"),this.clear_backstroke(),this.show_search_field_default(),this.search_field_scale()},l.prototype.activate_field=function(){return this.container.addClass("chosen-container-active"),this.active_field=!0,this.search_field.val(this.search_field.val()),this.search_field.focus()},l.prototype.test_active_click=function(e){return this.container.is(t(e.target).closest(".chosen-container"))?this.active_field=!0:this.close_field()},l.prototype.results_build=function(){return this.parsing=!0,this.selected_option_count=null,this.results_data=i.select_to_array(this.form_field),this.is_multiple?this.search_choices.find("li.search-choice").remove():this.is_multiple||(this.single_set_selected_text(),this.disable_search||this.form_field.options.length<=this.disable_search_threshold?(this.search_field[0].readOnly=!0,this.container.addClass("chosen-container-single-nosearch")):(this.search_field[0].readOnly=!1,this.container.removeClass("chosen-container-single-nosearch"))),this.update_results_content(this.results_option_build({first:!0})),this.search_field_disabled(),this.show_search_field_default(),this.search_field_scale(),this.parsing=!1},l.prototype.result_do_highlight=function(t){var e,s,i,r,l;if(t.length){if(this.result_clear_highlight(),this.result_highlight=t,this.result_highlight.addClass("highlighted"),r=(i=parseInt(this.search_results.css("maxHeight"),10))+(l=this.search_results.scrollTop()),(e=(s=this.result_highlight.position().top+this.search_results.scrollTop())+this.result_highlight.outerHeight())>=r)return this.search_results.scrollTop(0<e-i?e-i:0);if(s<l)return this.search_results.scrollTop(s)}},l.prototype.result_clear_highlight=function(){return this.result_highlight&&this.result_highlight.removeClass("highlighted"),this.result_highlight=null},l.prototype.results_show=function(){return this.is_multiple&&this.max_selected_options<=this.choices_count()?(this.form_field_jq.trigger("chosen:maxselected",{chosen:this}),!1):(this.container.addClass("chosen-with-drop"),this.form_field_jq.trigger("chosen:showing_dropdown",{chosen:this}),this.results_showing=!0,this.search_field.focus(),this.search_field.val(this.search_field.val()),this.winnow_results())},l.prototype.update_results_content=function(t){return this.search_results.html(t)},l.prototype.results_hide=function(){return this.results_showing&&(this.result_clear_highlight(),this.container.removeClass("chosen-with-drop"),this.form_field_jq.trigger("chosen:hiding_dropdown",{chosen:this})),this.results_showing=!1},l.prototype.set_tab_index=function(t){var e;if(this.form_field.tabIndex)return e=this.form_field.tabIndex,this.form_field.tabIndex=-1,this.search_field[0].tabIndex=e},l.prototype.set_label_behavior=function(){var e=this;if(this.form_field_label=this.form_field_jq.parents("label"),!this.form_field_label.length&&this.form_field.id.length&&(this.form_field_label=t("label[for='"+this.form_field.id+"']")),0<this.form_field_label.length)return this.form_field_label.bind("click.chosen",function(t){return e.is_multiple?e.container_mousedown(t):e.activate_field()})},l.prototype.show_search_field_default=function(){return this.is_multiple&&this.choices_count()<1&&!this.active_field?(this.search_field.val(this.default_text),this.search_field.addClass("default")):(this.search_field.val(""),this.search_field.removeClass("default"))},l.prototype.search_results_mouseup=function(e){var s;if((s=t(e.target).hasClass("active-result")?t(e.target):t(e.target).parents(".active-result").first()).length)return this.result_highlight=s,this.result_select(e),this.search_field.focus()},l.prototype.search_results_mouseover=function(e){var s;if(s=t(e.target).hasClass("active-result")?t(e.target):t(e.target).parents(".active-result").first())return this.result_do_highlight(s)},l.prototype.search_results_mouseout=function(e){if(t(e.target).hasClass("active-result"))return this.result_clear_highlight()},l.prototype.choice_build=function(e){var s,i,r=this;return s=t("<li />",{class:"search-choice"}).html("<span>"+e.html+"</span>"),e.disabled?s.addClass("search-choice-disabled"):((i=t("<a />",{class:"search-choice-close","data-option-array-index":e.array_index})).bind("click.chosen",function(t){return r.choice_destroy_link_click(t)}),s.append(i)),this.search_container.before(s)},l.prototype.choice_destroy_link_click=function(e){if(e.preventDefault(),e.stopPropagation(),!this.is_disabled)return this.choice_destroy(t(e.target))},l.prototype.choice_destroy=function(t){if(this.result_deselect(t[0].getAttribute("data-option-array-index")))return this.show_search_field_default(),this.is_multiple&&0<this.choices_count()&&this.search_field.val().length<1&&this.results_hide(),t.parents("li").first().remove(),this.search_field_scale()},l.prototype.results_reset=function(){if(this.form_field.options[0].selected=!0,this.selected_option_count=null,this.single_set_selected_text(),this.show_search_field_default(),this.results_reset_cleanup(),this.form_field_jq.trigger("change"),this.active_field)return this.results_hide()},l.prototype.results_reset_cleanup=function(){return this.current_selectedIndex=this.form_field.selectedIndex,this.selected_item.find("abbr").remove()},l.prototype.result_select=function(t){var e,s,i;if(this.result_highlight)return e=this.result_highlight,this.result_clear_highlight(),this.is_multiple&&this.max_selected_options<=this.choices_count()?(this.form_field_jq.trigger("chosen:maxselected",{chosen:this}),!1):(this.is_multiple?e.removeClass("active-result"):(this.result_single_selected&&(this.result_single_selected.removeClass("result-selected"),i=this.result_single_selected[0].getAttribute("data-option-array-index"),this.results_data[i].selected=!1),this.result_single_selected=e),e.addClass("result-selected"),(s=this.results_data[e[0].getAttribute("data-option-array-index")]).selected=!0,this.form_field.options[s.options_index].selected=!0,this.selected_option_count=null,this.is_multiple?this.choice_build(s):this.single_set_selected_text(s.text),(!t.metaKey&&!t.ctrlKey||!this.is_multiple)&&this.results_hide(),this.search_field.val(""),(this.is_multiple||this.form_field.selectedIndex!==this.current_selectedIndex)&&this.form_field_jq.trigger("change",{selected:this.form_field.options[s.options_index].value}),this.current_selectedIndex=this.form_field.selectedIndex,this.search_field_scale())},l.prototype.single_set_selected_text=function(t){return null==t&&(t=this.default_text),t===this.default_text?this.selected_item.addClass("chosen-default"):(this.single_deselect_control_build(),this.selected_item.removeClass("chosen-default")),this.selected_item.find("span").text(t)},l.prototype.result_deselect=function(t){var e;return e=this.results_data[t],!this.form_field.options[e.options_index].disabled&&(e.selected=!1,this.form_field.options[e.options_index].selected=!1,this.selected_option_count=null,this.result_clear_highlight(),this.results_showing&&this.winnow_results(),this.form_field_jq.trigger("change",{deselected:this.form_field.options[e.options_index].value}),this.search_field_scale(),!0)},l.prototype.single_deselect_control_build=function(){if(this.allow_single_deselect)return this.selected_item.find("abbr").length||this.selected_item.find("span").first().after('<abbr class="search-choice-close"></abbr>'),this.selected_item.addClass("chosen-single-with-deselect")},l.prototype.get_search_text=function(){return this.search_field.val()===this.default_text?"":t("<div/>").text(t.trim(this.search_field.val())).html()},l.prototype.winnow_results_set_highlight=function(){var t,e;if(null!=(t=(e=this.is_multiple?[]:this.search_results.find(".result-selected.active-result")).length?e.first():this.search_results.find(".active-result").first()))return this.result_do_highlight(t)},l.prototype.no_results=function(e){var s;return(s=t('<li class="no-results">'+this.results_none_found+' "<span></span>"</li>')).find("span").first().html(e),this.search_results.append(s)},l.prototype.no_results_clear=function(){return this.search_results.find(".no-results").remove()},l.prototype.keydown_arrow=function(){var t;return this.results_showing&&this.result_highlight?(t=this.result_highlight.nextAll("li.active-result").first())?this.result_do_highlight(t):void 0:this.results_show()},l.prototype.keyup_arrow=function(){var t;return this.results_showing||this.is_multiple?this.result_highlight?(t=this.result_highlight.prevAll("li.active-result")).length?this.result_do_highlight(t.first()):(0<this.choices_count()&&this.results_hide(),this.result_clear_highlight()):void 0:this.results_show()},l.prototype.keydown_backstroke=function(){var t;return this.pending_backstroke?(this.choice_destroy(this.pending_backstroke.find("a").first()),this.clear_backstroke()):(t=this.search_container.siblings("li.search-choice").last()).length&&!t.hasClass("search-choice-disabled")?(this.pending_backstroke=t,this.single_backstroke_delete?this.keydown_backstroke():this.pending_backstroke.addClass("search-choice-focus")):void 0},l.prototype.clear_backstroke=function(){return this.pending_backstroke&&this.pending_backstroke.removeClass("search-choice-focus"),this.pending_backstroke=null},l.prototype.keydown_checker=function(t){var e,s;switch(e=null!=(s=t.which)?s:t.keyCode,this.search_field_scale(),8!==e&&this.pending_backstroke&&this.clear_backstroke(),e){case 8:this.backstroke_length=this.search_field.val().length;break;case 9:this.results_showing&&!this.is_multiple&&this.result_select(t),this.mouse_on_container=!1;break;case 13:t.preventDefault();break;case 38:t.preventDefault(),this.keyup_arrow();break;case 40:t.preventDefault(),this.keydown_arrow()}},l.prototype.search_field_scale=function(){var e,s,i,r,l,o,n,h;if(this.is_multiple){for(r="position:absolute; left: -1000px; top: -1000px; display:none;",n=o=0,h=(l=["font-size","font-style","font-weight","font-family","line-height","text-transform","letter-spacing"]).length;n<h;n++)r+=(i=l[n])+":"+this.search_field.css(i)+";";return(e=t("<div />",{style:r})).text(this.search_field.val()),t("body").append(e),o=e.width()+25,e.remove(),(s=this.container.outerWidth())-10<o&&(o=s-10),this.search_field.css({width:o+"px"})}},l}()}).call(this);

"use strict";function _typeof(t){return(_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}window.wfacp=function(t){return{ajax:function(e,o,n){var a=this,i=null,c={},r="wfacp_";function s(e,o,n,i,c,r){o.length>0&&o.prop("disabled",!1),n.remove(),t(".bwf_ajax_btn_bottom_container").removeClass("ajax_loader_show"),!0===a.hasOwnProperty(e)&&"function"==typeof a[e]&&a[e](i,o,n,c,r)}return this.action=null,this.data=function(t){arguments.length>1&&void 0!==arguments[1]&&arguments[1];return t},this.before_send=function(t){},this.async=function(t){return t},this.method=function(t){return t},this.success=function(t,e,o,n,a){},this.complete=function(t,e,o,n,a){},this.error=function(t,e,o,n,a){},this.action=function(t){return t},this.ajax=function(e,o){"object"===_typeof(o)?o.action=e:o={action:e},o.action=r+e,a.before_send(document.body,e),o.wfacp_nonce=wfacp_secure.nonce;var n={url:ajaxurl,async:a.async(!0),method:a.method("POST"),data:o,success:function(t,o,n){"object"===_typeof(t)&&t.hasOwnProperty("nonce")&&(wfacp_secure.nonce=t.nonce,delete t.nonce),a.success(t,o,n,e)},complete:function(t,o,n){a.complete(t,o,n,e)},error:function(t,o,n){a.error(t,o,n,e)}};c.hasOwnProperty(e)?clearTimeout(c[e]):c[e]=null,c[e]=setTimeout(function(e){t.ajax(e)},200,n)},!0===o?(function(e){t(e).length>0&&(t(e).on("submit",function(e){e.preventDefault();var o=t(this).data("bwf-action");"undefined"!==o&&(o=(o=r+o).trim(),i=this,a.action=o,function(e){var o=i,n=null,r=new FormData(o);r.append("action",e),r.append("wfacp_nonce",wfacp_secure.nonce),t(o).attr("method"),0===t(o).find("."+e+"_ajax_loader").length?(t(o).find(".bwf_form_submit").prepend("<span class='"+e+"_ajax_loader spinner'></span>"),n=t(o).find("."+e+"_ajax_loader")):n=t(o).find("."+e+"_ajax_loader");var l=t(".bwf_ajax_btn_bottom_container");n.addClass("ajax_loader_show"),l.addClass("ajax_loader_show");var u=t(o).find("fieldset");u.length>0&&u.prop("disabled",!0),a.before_send(o,e);var f=a.data(r,o),d={url:ajaxurl,async:a.async(!0),method:a.method("POST"),data:f,processData:!1,contentType:!1,success:function(t,o,i){"object"===_typeof(t)&&t.hasOwnProperty("nonce")&&(wfacp_secure.nonce=t.nonce,delete t.nonce),s(e+"_ajax_success",u,n,t,o,i),a.success(t,o,i,u,n)},complete:function(t,o,i){s(e+"_ajax_complete",u,n,t,o,i),a.complete(t,o,i,u,n)},error:function(t,o,i){s(e+"_ajax_error",u,n,t,o,i),a.error(t,o,i,u,n)}};c.hasOwnProperty(e)?clearTimeout(c[e]):c[e]=null,c[e]=setTimeout(function(e){t.ajax(e)},200,d)}(o))}),"function"==typeof n&&n(a))}(e),this):!1===o?(function(e){t(e).length>0&&(t(e).on("click",function(e){e.preventDefault();var o=t(this).data("bwf-action");"undefined"!==o&&(o=(o=r+o).trim(),i=this,a.action=o,function(e){var o=i,n=a.data({},o);"object"===_typeof(n)?n.action=e:n={action:e},a.before_send(o,e),n.wfacp_nonce=wfacp_secure.nonce;var r={url:ajaxurl,async:a.async(!0),method:a.method("POST"),data:n,success:function(t,e,o){"object"===_typeof(t)&&t.hasOwnProperty("nonce")&&(wfacp_secure.nonce=t.nonce,delete t.nonce),a.success(t,e,o,i)},complete:function(t,e,o){a.complete(t,e,o,i)},error:function(t,e,o){a.error(t,e,o,i)}};c.hasOwnProperty(e)?clearTimeout(c[e]):c[e]=null,c[e]=setTimeout(function(e){t.ajax(e)},200,r)}(o))}),"function"==typeof n&&n(a))}(e),this):this},hooks:{hooks:{action:{},filter:{}},addAction:function(t,e,o,n){this.addHook("action",t,e,o,n)},addFilter:function(t,e,o,n){this.addHook("filter",t,e,o,n)},doAction:function(t){this.doHook("action",t,arguments)},applyFilters:function(t){return this.doHook("filter",t,arguments)},removeAction:function(t,e){this.removeHook("action",t,e)},removeFilter:function(t,e,o){this.removeHook("filter",t,e,o)},addHook:function(t,e,o,n,a){void 0==this.hooks[t][e]&&(this.hooks[t][e]=[]);var i=this.hooks[t][e];void 0==a&&(a=e+"_"+i.length),void 0==n&&(n=10),this.hooks[t][e].push({tag:a,callable:o,priority:n})},doHook:function(t,e,o){if(o=Array.prototype.slice.call(o,1),void 0!=this.hooks[t][e]){var n,a=this.hooks[t][e];a.sort(function(t,e){return t.priority-e.priority});for(var i=0;i<a.length;i++)"function"!=typeof(n=a[i].callable)&&(n=window[n]),"action"==t?n.apply(null,o):o[0]=n.apply(null,o)}if("filter"==t)return o[0]},removeHook:function(t,e,o,n){if(void 0!=this.hooks[t][e])for(var a=this.hooks[t][e],i=a.length-1;i>=0;i--)void 0!=n&&n!=a[i].tag||void 0!=o&&o!=a[i].priority||a.splice(i,1)}},tools:{ol:function(t){var e=0;return null!=t&&"object"===_typeof(t)&&(e=Object.keys(t).length),e},isEmpty:function(t){for(var e in t)if(t.hasOwnProperty(e))return!1;return!0},hp:function(t,e){var o=!1;return"object"===_typeof(t)&&void 0!==e&&(o=t.hasOwnProperty(e)),o},jsp:function(t){if("object"===_typeof(t)){var e=JSON.stringify(t);return e=JSON.parse(e)}return t},kys:function(t){return"object"===_typeof(t)&&null!=t&&this.ol(t)>0?Object.keys(t):[]},ucfirst:function(t){return t.replace(/^\w/,function(t){return t.toUpperCase()})},stripHTML:function(e){return t("<div>"+e+"</div>").text()},string_to_bool:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";return""!==t&&"false"!=t&&("boolean"==typeof t?t:"yes"===t||1===t||"true"===t||"1"===t)},is_object:function(t){return null!=t&&"object"===_typeof(t)},is_bool:function(t){return"boolean"==typeof(t=wfacp.tools.string_to_bool(t))}},swal:function(e){return wfacp_swal(t.extend({title:"",text:"",type:"warning",showCancelButton:!0,confirmButtonColor:"#0073aa",cancelButtonColor:"#e33b3b",confirmButtonText:""},e))},model:{add_product:function(){var e=t("#modal-add-product");e.length>0&&e.iziModal({title:"Add Product",headerColor:"#6dbe45",background:"#efefef",borderBottom:!1,width:600,overlayColor:"rgba(0, 0, 0, 0.6)",transitionIn:"fadeInDown",transitionOut:"fadeOutDown",navigateArrows:"false",onOpening:function(t){t.startLoading()},onOpened:function(t){t.stopLoading()},onClosed:function(t){}})}},sortable:function(e,o,n,a){var i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:".wfacp_item_drag",c=arguments.length>5&&void 0!==arguments[5]?arguments[5]:".ui-state-disabled",r=arguments.length>6&&void 0!==arguments[6]?arguments[6]:"",s=t(e);if(0!==s.length){s.off("sortable");var l={connectWith:e,start:function(t,e){o(t,e)},stop:function(t,e){n(t,e)},over:function(t,e){a("in",t,e)},out:function(t,e){a("out",t,e)}},u=".wfacp_item_drag";""!==i&&(u=i),""!==c&&(u+=":not("+c+")"),l.items=u,""!==r&&(l.placeholder=r),s.sortable(l),s.disableSelection()}},addClass:function(e,o){t(e).addClass(o)},removeClass:function(e,o){t(e).removeClass(o)},show_spinner:function(){var e=t(".wfacp_spinner.spinner");e.length>0&&e.css("visibility","visible")},show_data_save_model:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";""!==t&&(wfacp.show_saved_model.iziModal("setTitle",t),wfacp.show_saved_model.iziModal("open"))},is_global_checkout:function(){return wfacp.tools.hp(wfacp_data,"global_settings")&&wfacp.tools.hp(wfacp_data.global_settings,"override_checkout_page_id")&&wfacp_data.global_settings.override_checkout_page_id==wfacp_data.id},editorConfig:{tinymce:{theme:"modern",skin:"lightgray",language:"en",formats:{alignleft:[{selector:"p,h1,h2,h3,h4,h5,h6,td,th,div,ul,ol,li",styles:{textAlign:"left"}},{selector:"img,table,dl.wp-caption",classes:"alignleft"}],aligncenter:[{selector:"p,h1,h2,h3,h4,h5,h6,td,th,div,ul,ol,li",styles:{textAlign:"center"}},{selector:"img,table,dl.wp-caption",classes:"aligncenter"}],alignright:[{selector:"p,h1,h2,h3,h4,h5,h6,td,th,div,ul,ol,li",styles:{textAlign:"right"}},{selector:"img,table,dl.wp-caption",classes:"alignright"}],strikethrough:{inline:"del"}},relative_urls:!1,remove_script_host:!1,convert_urls:!1,browser_spellcheck:!0,fix_list_elements:!0,entities:"38,amp,60,lt,62,gt",entity_encoding:"raw",keep_styles:!1,cache_suffix:"wp-mce-4800-20180716",resize:"vertical",menubar:!1,branding:!1,preview_styles:"font-family font-size font-weight font-style text-decoration text-transform",end_container_on_empty_block:!0,wpeditimage_html5_captions:!0,wp_lang_attr:"en-US",wp_keep_scroll_position:!1,wp_shortcut_labels:{"Heading 1":"access1","Heading 2":"access2","Heading 3":"access3","Heading 4":"access4","Heading 5":"access5","Heading 6":"access6",Paragraph:"access7",Blockquote:"accessQ",Underline:"metaU",Strikethrough:"accessD",Bold:"metaB",Italic:"metaI",Code:"accessX","Align center":"accessC","Align right":"accessR","Align left":"accessL",Justify:"accessJ",Cut:"metaX",Copy:"metaC",Paste:"metaV","Select all":"metaA",Undo:"metaZ",Redo:"metaY","Bullet list":"accessU","Numbered list":"accessO","Insert/edit image":"accessM","Remove link":"accessS","Toolbar Toggle":"accessZ","Insert Read More tag":"accessT","Insert Page Break tag":"accessP","Distraction-free writing mode":"accessW","Add Media":"accessM","Keyboard Shortcuts":"accessH"},toolbar1:"bold,italic,bullist,numlist,link",wpautop:!1,indent:!0,elementpath:!1,plugins:"charmap,colorpicker,hr,lists,paste,tabfocus,textcolor,fullscreen,wordpress,wpautoresize,wpeditimage,wpemoji,wpgallery,wplink,wptextpattern"},quicktags:{buttons:"strong,em,link,ul,ol,li,code"}}}}(jQuery);

"use strict";function _typeof(e){return(_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function _defineProperties(e,t){for(var i=0;i<t.length;i++){var a=t[i];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}function _createClass(e,t,i){return t&&_defineProperties(e.prototype,t),i&&_defineProperties(e,i),e}!function(e){var t=function(){function t(e){_classCallCheck(this,t),null!=document.getElementById("wfacp_product_container")&&(this.formHasChanges=!1,this.search_timeout=null,this.search_model_open=null,this.show_saved_model=null,this.id=e.id,this.name=e.name,this.wfacp_id=e.id,this.currency=e.currency,this.products=e.products,this.add_to_cart_setting=e.products_settings.add_to_cart_setting,this.last_active_product="",this.addProductModel(),this.main(),this.jQevent())}return _createClass(t,[{key:"main",value:function(){var t=this;return this.product_vue=new Vue({el:"#wfacp_product_container",created:function(){wfacp.hooks.doAction("wfacp_product_ui_created",this)},methods:{isEmpty:function(){return 0===wfacp.tools.ol(this.products)},addProduct:function(t,i){e(".wfacp-preview").show(),e(".wfacp_s_menu_rules").removeClass("wfacp_stop_navigation"),Vue.set(this.products,t,i),this.save_products()},removeProduct:function(e){var i=wfacp.swal(wfacp_localization.global.remove_product);i.then(function(i){i.value&&(t.formHasChanges=!0,t.removeProduct(e))}),i.catch(function(e){})},set_product_data:function(e,i,a){if(null!=a.target){t.formHasChanges=!0;var s=a.target.value?a.target.value:"";if(this.last_active_product=e,"discount_amount"===i){var l=this.products[e].discount_type;"percent_discount_sale"!==l&&"percent_discount_reg"!==l||s>100&&(s=100)}else if("discount_type"===i){var o=this.products[e].discount_amount;"percent_discount_sale"!==s&&"percent_discount_reg"!==s||(o=0,Vue.set(this.products[e],"discount_amount",o))}Vue.set(this.products[e],i,s)}},remove_non_required_keys:function(e){if(wfacp.tools.ol(e)>0)for(var t in e=wfacp.tools.jsp(e))delete e[t].price,delete e[t].regular_price,delete e[t].sale_price,delete e[t].image;return e},save_products:function(){var e=new wfacp.ajax,i={products:this.remove_non_required_keys(this.products),wfacp_id:t.id,settings:{add_to_cart_setting:this.add_to_cart_setting},last_active_product:this.last_active_product};e.ajax("save_products",i),wfacp.show_spinner(),e.success=function(e){wfacp.show_data_save_model(e.msg)}}},data:{have_variable:!1,name:this.name,currency:this.currency,products:this.products,add_to_cart_setting:this.add_to_cart_setting,last_active_product:this.last_active_product}}),this.product_vue}},{key:"addProducts",value:function(e){if(wfacp.tools.hp(e,"products")&&wfacp.tools.ol(e.products)>0){var t=e.products;for(var i in t)this.product_vue.addProduct(i,t[i])}}},{key:"removeProduct",value:function(t){var i=this,a=e("#"+t);a.length>0&&a.find(".wfacp_overlay_active").removeClass("wfacp_overlay_none_here");var s=new wfacp.ajax;s.ajax("remove_product",{product_key:t,wfacp_id:this.id}),s.complete=function(a){wfacp.tools.ol(a)>0&&(Vue.delete(i.product_vue.products,t),0===wfacp.tools.ol(i.product_vue.products)?(e(".wfacp-preview").hide(),e(".wfacp_s_menu_rules").addClass("wfacp_stop_navigation")):e(".wfacp_overlay_active").addClass("wfacp_overlay_none_here"))}}},{key:"addProductVue",value:function(t){if(!0!==this.search_model_open){this.search_model_open=!0;var i=this;return this.add_product_vue=new Vue({el:"#modal-add-product-form",components:{Multiselect:window.VueMultiselect.default},data:{modal:t,isLoading:!1,products:[],is_single:"",include_variations:!1,selectedProducts:[]},methods:{onSubmit:function(){var t=new wfacp.ajax,a=this;a.modal.startLoading();var s=[],l=this.selectedProducts;if(wfacp.tools.ol(this.selectedProducts)>0)for(var o in l)s.push(l[o].id);var n={products:s,wfacp_id:i.id};t.ajax("add_product",n),t.success=function(t){wfacp.tools.ol(t)>0&&i.addProducts(t),e("#modal-add-product").iziModal("close")},t.complete=function(){a.clearAll(),a.modal.stopLoading()}},asyncFind:function(e){var t=this;this.isLoading=!0,""!==e?(clearTimeout(i.search_timeout),i.search_timeout=setTimeout(function(e){var i=new wfacp.ajax,a={term:e,variations:t.include_variations};i.ajax("product_search",a),i.success=function(e){t.products=e,t.isLoading=!1},i.complete=function(){t.isLoading=!1}},1e3,e)):this.isLoading=!1},clearAll:function(){this.products=[],this.selectedProducts=[],this.isLoading=!1}}}),this.add_product_vue}}},{key:"addProductModel",value:function(){var t=this,i=e("#modal-add-product");i.length>0&&i.iziModal({title:"Add Product",headerColor:"#6dbe45",background:"#efefef",borderBottom:!1,width:600,overlayColor:"rgba(0, 0, 0, 0.6)",transitionIn:"fadeInDown",transitionOut:"fadeOutDown",navigateArrows:"false",onOpening:function(e){e.startLoading()},onOpened:function(e){e.stopLoading(),t.addProductVue(e)},onClosed:function(e){}})}},{key:"jQevent",value:function(){var t=this;e(document).on("click",".wfacp_edit_title",function(){e(this).siblings(".wfacp_product_title").prop("contentEditable",!0).addClass("wfacp_title_border").focus(),e(this).hide(),e(this).siblings(".wfacp_save_title").show()}),e(document).on("click",".wfacp_save_title",function(){var i=e(this).attr("index");e(this).siblings(".wfacp_product_title").prop("contentEditable",!1);var a=e(this).siblings(".wfacp_product_title").removeClass("wfacp_title_border").text();e(this).hide(),e(this).siblings(".wfacp_edit_title").show(),(a=wfacp.tools.stripHTML(a))&&(Vue.set(t.product_vue.products[i],"title",a),t.product_vue.save_products()),wfacp.hooks.doAction("wfacp_update_title",[{title:a,index:i}])})}}]),t}(),i=function(){function t(e){var i=this;_classCallCheck(this,t),this.add_field_model_open=!1,this.add_section_model_open=!1,this.edit_field_model_open=!1,this.step_name="single_step",this.current_edit_field={},this.current_edit_field_id="",this.field_index=null,null!=document.getElementById("wfacp_layout_container")&&(this.builder=e,this.id=e.id,this.steps=e.layout.steps,this.input_fields=e.layout.input_fields,this.available_fields=e.layout.available_fields,this.fieldsets=e.layout.fieldsets,this.available_steps=["single_step","two_step","third_step"],this.model(),this.main(),this.editFieldVue(),wfacp.hooks.addFilter("wfacp_field_data_merge_with_model",function(e,t){return i.field_data_merge_with_model(e,t)}),wfacp.hooks.addFilter("wfacp_before_field_save",function(e,t){return i.wfacp_before_field_save(e,t)}))}return _createClass(t,[{key:"main",value:function(){var t=this;return this.layout_vue=new Vue({el:"#wfacp_layout_container",created:function(){this.enableSortable(),wfacp.hooks.doAction("wfacp_layout_created",this),this.enableTabs(),this.validateDependency()},methods:{enableTabs:function(){var t=this;setTimeout(function(){e(document).on("click",".wfacp_template_tabs",function(){if(!e(this).hasClass("wfacp_active_tabs")){var i=e(this).data("slug");t.show_template_frame(i)}})},1500)},addNewStep:function(){t.available_steps.indexOf(this.current_step)>-1&&("single_step"===this.current_step?(this.set_template("two_step"),Vue.set(this.steps.two_step,"active","yes")):"two_step"===this.current_step&&(this.set_template("third_step"),Vue.set(this.steps.third_step,"active","yes")))},deleteStep:function(e){t.available_steps.indexOf(e)>-1&&("two_step"===e?(this.moveStepField("two_step"),this.set_template("single_step"),Vue.set(this.steps.two_step,"active","no")):"third_step"===e&&(this.moveStepField("third_step"),this.set_template("two_step"),Vue.set(this.steps.third_step,"active","no")))},set_template:function(e){Vue.set(this,"current_step",e),this.current_step_name=this.steps[e].name,this.enableSortable(),this.show_template_frame(e)},show_template_frame:function(t){setTimeout(function(){var i=e(".single_step_template[data-slug='"+t+"']"),a=e(".wfacp_template_tabs[data-slug='"+t+"']");i.length>0&&(e(".wfacp_template_tabs").removeClass("wfacp_active_tabs"),e(".single_step_template").hide(),a.addClass("wfacp_active_tabs"),i.show())},0,t)},enableSortable:function(){var e=this;setTimeout(function(){wfacp.sortable(".template_field_container",e.StartSortable,e.StopSortable,e.hoverDrag,"","","wfacp_save_btn_style ui-sortable-placeholder ui-state-highlight"),wfacp.sortable(".wfacp_sections_holder.single_step",e.StartSectionSortable,e.StopSectionSortable,function(){},".wfacp_field_container"),wfacp.sortable(".wfacp_sections_holder.two_step",e.StartSectionSortable,e.StopSectionSortable,function(){},".wfacp_field_container"),wfacp.sortable(".wfacp_sections_holder.third_step",e.StartSectionSortable,e.StopSectionSortable,function(){},".wfacp_field_container")},300)},StartSectionSortable:function(t,i){e(t.srcElement).parents(".wfacp_field_container").addClass("highlight_field_container")},StopSectionSortable:function(t,i){e(t.srcElement).parents(".wfacp_field_container").removeClass("highlight_field_container")},hoverDrag:function(t,i,a){"in"===t?e(i.srcElement).parents(".wfacp_field_container")[0]!==e(i.target).parents(".wfacp_field_container")[0]&&e(i.target).parents(".wfacp_field_container").addClass("highlight_field_container"):e(i.target).parents(".wfacp_field_container").removeClass("highlight_field_container")},StartSortable:function(t,i){var a=e(".wfacp_save_btn_style.ui-sortable-placeholder.ui-state-highlight");e(i.item[0]).length>0&&a.length>0&&(a.width(e(i.item[0]).width()),a.html("<span class='wfacp_placeholder_text_here'>placeholder</span>")),wfacp.addClass(".wfacp_field_container","activate_dragging_field")},StopSortable:function(t,i){e(".wfacp_field_container").removeClass("activate_dragging_field highlight_field_container");var a,s=e(t.srcElement).parents(".wfacp_field_container"),l=e(t.target),o=e(t.srcElement);"span"===t.srcElement.localName&&(o=e(t.srcElement).parent("div")),a=o.attr("data-id");var n=s.attr("step-name"),d=l.attr("step-name"),r=s.attr("field-index"),c=l.attr("field-index");n!==d?(o.remove(),this.parentSwitching(d,n,c,r,a)):r!==c&&(o.remove(),this.updateInput(n,c,r,a))},elementSorting:function(e,t){},dragStart:function(e){t.dragStart(e)},allowDrop:function(e){t.allowDrop(e)},dragEnd:function(e){t.dragEnd(e)},dragEnter:function(e){t.dragEnter(e)},dragLeave:function(e){t.dragLeave(e)},drop:function(e,i,a){var s=t.drop(e);if(!1===s)return null;var l=s[0],o=s[1];if(""===o)return null;this.addInput(i,a,l,o)},addInput:function(t,i,a,s){var l,o=!0,n=e(".single_step").find(".wfacp_field_container[field-index="+i+"]");(n.length>0&&n.find(".wfacp_item_drag[data-id="+a+"]").length>0&&(o=!1),o)&&((l=wfacp.tools.jsp(this.input_fields[s][a])).id=a,l.field_type=s,this.pushFieldInStep(t,i,l),Vue.delete(this.input_fields[s],a),this.validateDependency(),e(".wfacp_field_container").removeClass("highlight_field_container"),e(".wfacp_field_container").removeClass("highlight_field_container activate_dragging_field"))},getFieldFromSection:function(e,t,i){var a=this.findFieldIndex(e,t,i);if(null==a)return null;var s=wfacp.tools.jsp(this.fieldsets[e][t].fields[a]);return wfacp.tools.hp(this.fieldsets[e][t],"fields")||Vue.set(this.fieldsets[e][t],"fields",[]),s},pushFieldInStep:function(e,t,i){wfacp.tools.hp(this.fieldsets[e][t],"fields")||Vue.set(this.fieldsets[e][t],"fields",[]);var a=wfacp.tools.jsp(this.fieldsets[e][t].fields);a.push(i),Vue.set(this.fieldsets[e][t],"fields",a),this.hideFieldContainerPlaceholder(e,t)},parentSwitching:function(e,t,i,a,s){var l=this.getFieldFromSection(e,i,s);if(null!==l){this.pushFieldInStep(t,a,l);var o=wfacp.tools.jsp(this.fieldsets[e][i].fields);Vue.set(this.fieldsets[e][i],"fields",o)}},updateInput:function(e,t,i,a){var s=this.getFieldFromSection(e,t,a);null!=s&&this.pushFieldInStep(e,i,s)},moveStepField:function(e){wfacp.hooks.doAction("manage_step_field",wfacp.tools.jsp(e),this);var t=wfacp.tools.jsp(this.fieldsets[e]);if(void 0!==t&&0!==wfacp.tools.ol(t))for(var i in t)if(0!==wfacp.tools.ol(t[i].fields)){for(var a=t[i].fields,s=0;s<a.length;s++){var l=a[s].id,o=a[s].field_type;Vue.set(this.input_fields[o],l,a[s])}Vue.set(this.fieldsets[e][i],"fields",[])}},removeField:function(e,t,i,a,s){s.stopPropagation();var l=this.findFieldIndex(e,a,t);if(null==l)return null;var o=wfacp.tools.jsp(this.fieldsets[e][a].fields),n=o[l];return o.splice(l,1),Vue.set(this.fieldsets[e][a],"fields",o),wfacp.tools.ol(n)>0&&Vue.set(this.input_fields[i],t,n),this.showFieldContainerPlaceholder(e,a),this.validateDependency(),!0},findFieldIndex:function(e,t,i){if(!wfacp.tools.hp(this.fieldsets[e][t],"fields"))return this.fieldsets[e][t].fields=[],null;var a=wfacp.tools.jsp(this.fieldsets[e][t].fields);if(0===a.length)return null;for(var s=0;s<a.length;s++)if(a[s].id===i)return s;return null},prepareErrorMsg:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"",i=[];for(var a in e)i.push(e[a]);return i.join(t)},getRequiredField:function(){return wfacp.tools.jsp(wfacp_localization.fields.input_field_error)},getEmptySteps:function(){return wfacp.tools.jsp(wfacp_localization.fields.steps_error_msgs)},getSortedElement:function(){var t=this,i=this.getRequiredField(),a=this.getEmptySteps(),s={},l=!1,o=!1,n=0,d=1,r="no",c=!1,_=!1,p=e(".single_step_template"),f={single_step:[],two_step:[],third_step:[]};if(p.length>0){var u=1;p.each(function(){var p=0,h=e(this).attr("data-slug");if(0!==e(this).find(".wfacp_item_drag").length)if(wfacp.tools.hp(t.fieldsets,h)){var w=wfacp.tools.jsp(t.fieldsets[h]);if(0!==w.length){var g=e(this).find(".wfacp_field_container");g.length>0&&g.each(function(a,s){var g=e(this),m=g.attr("field-index"),v=g[0].querySelectorAll(".wfacp_item_drag");if(!1===wfacp.tools.hp(f,h)&&(f[h]=wfacp.tools.jsp(w)),0!==v.length){f[h][p]=wfacp.tools.jsp(w[m]),f[h][p].fields=[];var b=wfacp.tools.jsp(w[m].fields);v.forEach(function(e,a){var s=e.getAttribute("data-id");"address"===s&&(l=!0,n=u),"shipping-address"===s&&(o=!0,d=u),"product_switching"===s&&(r="yes"),"order_coupon"===s&&(c=!0),"shipping_calculator"===s&&(_=!0),wfacp.tools.hp(i,s)&&delete i[s];var w=t.findFieldIndex(h,m,s);if(null!==w){var g=b[w];f[h][p].fields.push(g)}u++}),p++}})}else s[h]=a[h]}else s[h]=a[h];else s[h]=a[h]})}return{fieldsets:f,required:i,empty_steps:s,have_billing_address:l,have_shipping_address:o,have_billing_address_index:n,have_shipping_address_index:d,enabled_product_switching:r,have_shipping_method:_,have_coupon_field:c}},showStepsError:function(e){var t=this.prepareErrorMsg(e," & ");return t+=" "+wfacp_localization.fields.empty_step_error,wfacp.swal({text:t,title:"Validation Error",type:"error",confirmButtonText:wfacp_localization.global.confirm_button_text,showCancelButton:!1}),!1},save_template:function(){var i=this.getSortedElement(),a=i.empty_steps,s=wfacp.tools.ol(a);if(s>0){if(1!==s)return this.showStepsError(a),!1;var l=e(".wfacp_step_heading .wfacp_template_tabs:last").data("slug");if(!wfacp.tools.hp(a,l))return this.showStepsError(a),!1}var o=i.required;if(wfacp.tools.ol(o)>0){var n=this.prepareErrorMsg(o);return wfacp.swal({text:n,title:"Validation Error",type:"error",confirmButtonText:wfacp_localization.global.confirm_button_text,showCancelButton:!1}),!1}var d=t.editFieldVue(),r=new wfacp.ajax,c={steps:wfacp.tools.jsp(this.steps),fieldsets:i.fieldsets,products:d.products,default_products:d.default_products,product_settings:d.product_settings,wfacp_id:t.id,have_coupon_field:i.have_coupon_field,have_billing_address:i.have_billing_address,have_shipping_address:i.have_shipping_address,have_billing_address_index:i.have_billing_address_index,have_shipping_address_index:i.have_shipping_address_index,enabled_product_switching:i.enabled_product_switching,have_shipping_method:i.have_shipping_method,current_step:this.current_step};r.ajax("save_layout",c),wfacp.show_spinner(),r.success=function(e){wfacp.show_data_save_model(e.msg)}},addField:function(){t.modal_add_field.iziModal("open")},editField:function(i,a,s,l){var o=t.editFieldVue(),n=wfacp.tools.jsp(this.fieldsets[i][a].fields[s]);console.log(n),o.current_field_id=n.id,t.current_edit_field={step_name:i,index:s,section:a,field:n};if(e.inArray(n.id,["address","shipping_calculator","shipping-address","product_switching","order_coupon","shipping-address","wysiwyg_editor"])>-1||e.inArray(n.type,["wfacp_wysiwyg"])>-1)o.model_sub_title="",o.model_field_type="";else{var d="";"advanced"===n.field_type&&(d=" | "+wfacp_localization.fields.field_types_label+" : "+n.type),o.model_sub_title=wfacp_localization.fields.field_id_slug+" : "+n.id+d}o.setData()},deleteCustomField:function(e,i,a){var s=this;wfacp.swal({text:"",title:"Delete Custom Field `"+a+"`",type:"error",confirmButtonText:"Ok",showCancelButton:!1}).then(function(a){if(!wfacp.tools.hp(a,"value"))return!1;Vue.delete(s.input_fields[e],i),Vue.delete(s.available_fields[e],i);var l=new wfacp.ajax,o={section:e,index:i,wfacp_id:t.id};l.ajax("delete_custom_field",o),wfacp.show_spinner(),l.success=function(e){!0===e.status&&(t.addField(e.data),wfacp.show_data_save_model(e.msg))}})},addSection:function(e){t.step_name=e,t.field_index=null,t.modal_add_section.iziModal("setTitle","Add Section"),t.modal_add_section.iziModal("open")},editSection:function(e,i){t.step_name=e,t.field_index=i,t.modal_add_section.iziModal("setTitle","Edit Section"),t.modal_add_section.iziModal("open")},deleteSection:function(e,t){var i=this,a=wfacp.tools.jsp(this.fieldsets[e][t]),s=a.name,l=wfacp_localization.fields.section.delete.replace("{{section_name}}",s),o=wfacp.swal({text:l,type:"error",confirmButtonText:wfacp_localization.global.confirm_button_text});o.then(function(s){if(!wfacp.tools.hp(s,"value"))return!1;if(wfacp.tools.hp(a,"fields")&&wfacp.tools.ol(a.fields)>0)for(var l=a.fields,o=0;o<l.length;o++){var n=l[o],d=n.id,r=n.field_type;Vue.set(i.input_fields[r],d,n)}Vue.delete(i.fieldsets[e],t)}),o.catch(function(e){})},showFieldContainerPlaceholder:function(t,i){var a=e(".template_field_container."+t+"[field-index="+i+"]");a.length>0&&(0===a.find(".wfacp_item_drag").length&&a.find(".template_field_placeholder_tbl").show())},hideFieldContainerPlaceholder:function(t,i){var a=e(".template_field_container."+t+"[field-index="+i+"]");a.length>0&&a.find(".template_field_placeholder_tbl").hide()},showHideGlobalDependency:function(e){var t=this.global_dependency_messages;if(wfacp.tools.ol(t)>0)for(var i in t){var a=t[i];wfacp.tools.hp(a,"id")&&(wfacp.tools.hp(e,a.id)?t[i].show="no":t[i].show="yes")}wfacp.hooks.doAction("show_hide_global_dependency",t)},remove_dependency_messages:function(e){var i=this,a=new wfacp.ajax,s=this.global_dependency_messages[e],l="self";wfacp.tools.hp(s,"is_global")&&wfacp.tools.string_to_bool(s.is_global)&&(l="global");var o={index:e,wfacp_id:t.id,message_type:l};a.ajax("hide_notification",o),a.success=function(t){Vue.delete(i.global_dependency_messages,e)}},validateDependency:function(){var e=this;setTimeout(function(){var t=wfacp.tools.jsp(e.fieldsets),i={};for(var a in t){var s=t[a];if(0!==s.length)for(var l in s){var o=s[l].fields;if(0!==o.length)for(var n=0;n<o.length;n++){i[o[n].id]=1}}}e.showHideGlobalDependency(i)})}},data:{current_step:this.builder.layout.current_step,current_step_name:this.steps[this.builder.layout.current_step].name,steps:this.steps,fieldsets:this.fieldsets,input_fields:this.input_fields,available_fields:this.available_fields,required_fields:wfacp_localization.fields.input_field_error,error:[],noofstep:1,error_msg:{},global_dependency_messages:this.builder.global_dependency_messages}}),this.layout_vue}},{key:"defaultStepObj",value:function(e){return{name:"Step",slug:"step_"+e,friendly_name:"Step "+e,active:"yes"}}},{key:"dragStart",value:function(e){wfacp.addClass(".wfacp_field_container","activate_dragging_field"),e.dataTransfer.setData("unique_id",e.target.id),e.dataTransfer.setData("section_name",e.target.getAttribute("data-input-section"))}},{key:"dragEnd",value:function(e){wfacp.removeClass(".wfacp_field_container","activate_dragging_field"),wfacp.removeClass(".wfacp_field_container","highlight_field_container")}},{key:"drop",value:function(e){e.preventDefault();var t=e.dataTransfer.getData("unique_id");if(t===e.target.id)return!1;var i=e.dataTransfer.getData("section_name");return this.layout_vue.enableSortable(),[t,i]}},{key:"allowDrop",value:function(e){e.preventDefault()}},{key:"dragEnter",value:function(t){e(t.target).parents(".wfacp_field_container").removeClass(t.target,"activate_dragging_field"),e(t.target).parents(".wfacp_field_container").addClass("highlight_field_container")}},{key:"dragLeave",value:function(t){e(t.target).parents(".wfacp_field_container").addClass(t.target,"activate_dragging_field"),e(t.target).parents(".wfacp_field_container").removeClass("highlight_field_container")}},{key:"getSection",value:function(e,t){return wfacp.tools.hp(this.layout_vue.fieldsets,e)&&wfacp.tools.hp(this.layout_vue.fieldsets[e],t)?wfacp.tools.jsp(this.layout_vue.fieldsets[e][t]):null}},{key:"addSection",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(0===wfacp.tools.ol(t))return!1;!1===wfacp.tools.hp(this.layout_vue.fieldsets,this.step_name)&&Vue.set(this.layout_vue.fieldsets,this.step_name,[]);var i=wfacp.tools.jsp(this.layout_vue.fieldsets[this.step_name]);i.push({name:t.name,class:t.class,sub_heading:t.sub_heading,fields:[]}),Vue.set(this.layout_vue.fieldsets,this.step_name,i),this.layout_vue.enableSortable()}},{key:"updateSection",value:function(e,t){var i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};if(0===wfacp.tools.ol(i))return!1;if(wfacp.tools.hp(this.layout_vue.fieldsets,e)&&wfacp.tools.hp(this.layout_vue.fieldsets[e],t)){var a=wfacp.tools.jsp(this.layout_vue.fieldsets[e][t]);return a.name=i.name,a.class=i.class,a.sub_heading=i.sub_heading,Vue.set(this.layout_vue.fieldsets[e],t,a),!0}return!1}},{key:"addField",value:function(e){if(wfacp.tools.ol(e)>0){var t=e.unique_id,i=e.field_type;Vue.set(this.layout_vue.input_fields[i],t,e),Vue.set(this.layout_vue.available_fields[i],t,e)}}},{key:"editFieldCondition",value:function(e,t){}},{key:"getAddressFields",value:function(){var e=[{type:"label",label:wfacp_localization.fields.show_field_label1,styleClasses:"wfacp_show_field_lable",visible:function(e){return!0===e.is_address}},{type:"label",label:wfacp_localization.fields.show_field_label2,styleClasses:"wfacp_show_field_lable",visible:function(e){return!0===e.is_address}},{type:"label",label:wfacp_localization.fields.show_field_label3,styleClasses:"wfacp_show_field_lable",visible:function(e){return!0===e.is_address}},{type:"switch",label:wfacp_localization.fields.address.first_name,model:"first_name",hint:"",textOn:wfacp_localization.global.active,textOff:wfacp_localization.global.inactive,styleClasses:["wfacp_first_name"],visible:function(e){return!0===e.is_address}},{type:"input",inputType:"text",label:wfacp_localization.fields.address.label,model:"first_name_label",hint:wfacp_localization.fields.address.billing_address_last_name_hint,placeholder:wfacp_localization.fields.first_name_label,visible:function(e){return!0===e.is_address&&"address"===e.id},validator:VueFormGenerator.validators.string},{type:"input",inputType:"text",label:wfacp_localization.fields.address.label,model:"first_name_label",placeholder:wfacp_localization.fields.first_name_label,visible:function(e){return!0===e.is_address&&"shipping-address"===e.id},validator:VueFormGenerator.validators.string},{type:"input",inputType:"text",label:wfacp_localization.fields.placeholder_field_label,model:"first_name_placeholder",placeholder:"First Name",visible:function(e){return!0===e.is_address},validator:VueFormGenerator.validators.string},{type:"switch",label:wfacp_localization.fields.address.last_name,model:"last_name",hint:"",textOn:wfacp_localization.global.active,textOff:wfacp_localization.global.inactive,styleClasses:["wfacp_last_name"],visible:function(e){return!0===e.is_address}},{type:"input",inputType:"text",label:wfacp_localization.fields.address.label,model:"last_name_label",hint:wfacp_localization.fields.address.billing_address_last_name_hint,placeholder:"",visible:function(e){return!0===e.is_address&&"address"===e.id},validator:VueFormGenerator.validators.string},{type:"input",inputType:"text",label:wfacp_localization.fields.address.label,model:"last_name_label",placeholder:"",visible:function(e){return!0===e.is_address&&"shipping-address"===e.id},validator:VueFormGenerator.validators.string},{type:"input",inputType:"text",label:wfacp_localization.fields.address.placeholder,model:"last_name_placeholder",placeholder:"",visible:function(e){return!0===e.is_address},validator:VueFormGenerator.validators.string},{type:"switch",label:wfacp_localization.fields.address.company,model:"company",hint:"",styleClasses:["wfacp_company"],textOn:wfacp_localization.global.active,textOff:wfacp_localization.global.inactive,visible:function(e){return!0===e.is_address}},{type:"input",inputType:"text",label:wfacp_localization.fields.address.label,model:"company_label",placeholder:"",visible:function(e){return!0===e.is_address},validator:VueFormGenerator.validators.string},{type:"input",inputType:"text",label:wfacp_localization.fields.address.placeholder,model:"company_placeholder",placeholder:"",visible:function(e){return!0===e.is_address},validator:VueFormGenerator.validators.string},{type:"switch",label:wfacp_localization.fields.address.street_address1,model:"street_address1",hint:"",styleClasses:["wfacp_address_1"],textOn:wfacp_localization.global.active,textOff:wfacp_localization.global.inactive,visible:function(e){return!0===e.is_address}},{type:"input",inputType:"text",label:wfacp_localization.fields.address.label,model:"street_address_1_label",placeholder:"",visible:function(e){return!0===e.is_address},validator:VueFormGenerator.validators.string},{type:"input",inputType:"text",label:wfacp_localization.fields.address.placeholder,model:"street_address_1_placeholder",placeholder:"",visible:function(e){return!0===e.is_address},validator:VueFormGenerator.validators.string},{type:"switch",label:wfacp_localization.fields.address.street_address2,model:"street_address2",hint:"",styleClasses:["wfacp_address_2"],textOn:wfacp_localization.global.active,textOff:wfacp_localization.global.inactive,visible:function(e){return!0===e.is_address}},{type:"input",inputType:"text",label:wfacp_localization.fields.address.label,model:"street_address_2_label",placeholder:"",visible:function(e){return!0===e.is_address},validator:VueFormGenerator.validators.string},{type:"input",inputType:"text",label:wfacp_localization.fields.address.placeholder,model:"street_address_2_placeholder",placeholder:"",visible:function(e){return!0===e.is_address},validator:VueFormGenerator.validators.string},{type:"switch",label:wfacp_localization.fields.address.city,hint:"",model:"address_city",styleClasses:["wfacp_city"],textOn:wfacp_localization.global.active,textOff:wfacp_localization.global.inactive,visible:function(e){return!0===e.is_address}},{type:"input",inputType:"text",label:wfacp_localization.fields.address.label,model:"address_city_label",placeholder:"City",visible:function(e){return!0===e.is_address},validator:VueFormGenerator.validators.string},{type:"input",inputType:"text",label:wfacp_localization.fields.address.placeholder,model:"address_city_placeholder",placeholder:"City",visible:function(e){return!0===e.is_address},validator:VueFormGenerator.validators.string},{type:"switch",label:wfacp_localization.fields.address.state,model:"address_state",styleClasses:["wfacp_state"],hint:"",textOn:wfacp_localization.global.active,textOff:wfacp_localization.global.inactive,visible:function(e){return!0===e.is_address}},{type:"input",inputType:"text",label:wfacp_localization.fields.address.label,model:"address_state_label",placeholder:"State",visible:function(e){return!0===e.is_address},validator:VueFormGenerator.validators.string},{type:"input",inputType:"text",label:wfacp_localization.fields.address.placeholder,model:"address_state_placeholder",placeholder:"State",visible:function(e){return!0===e.is_address},validator:VueFormGenerator.validators.string},{type:"switch",label:wfacp_localization.fields.address.zip,model:"address_postcode",hint:"",styleClasses:["wfacp_postcode"],textOn:wfacp_localization.global.active,textOff:wfacp_localization.global.inactive,visible:function(e){return!0===e.is_address}},{type:"input",inputType:"text",label:wfacp_localization.fields.address.label,model:"address_postcode_label",placeholder:"Postcode",visible:function(e){return!0===e.is_address},validator:VueFormGenerator.validators.string},{type:"input",inputType:"text",label:wfacp_localization.fields.address.placeholder,model:"address_postcode_placeholder",placeholder:"Postcode",visible:function(e){return!0===e.is_address},validator:VueFormGenerator.validators.string},{type:"switch",label:wfacp_localization.fields.address.country,model:"address_country",hint:"",styleClasses:["wfacp_country"],textOn:wfacp_localization.global.active,textOff:wfacp_localization.global.inactive,visible:function(e){return!0===e.is_address}},{type:"input",inputType:"text",label:wfacp_localization.fields.address.lable,model:"address_country_label",placeholder:"USA",visible:function(e){return!0===e.is_address},validator:VueFormGenerator.validators.string},{type:"input",inputType:"text",label:wfacp_localization.fields.address.placeholder,model:"address_country_placeholder",placeholder:"USA",visible:function(e){return!0===e.is_address},validator:VueFormGenerator.validators.string},{type:"switch",label:wfacp_localization.fields.same_as_billing,model:"same_as_billing",textOn:wfacp_localization.global.active,textOff:wfacp_localization.global.inactive,styleClasses:"wfacp_full_width_fields",visible:function(e){return!0===e.is_address&&"shipping-address"===e.id}},{type:"input",inputType:"text",label:wfacp_localization.fields.address.lable,model:"same_as_billing_label",hint:wfacp_localization.fields.same_as_billing_label_hint,styleClasses:"wfacp_full_width_input",placeholder:"USA",visible:function(e){return!0===e.is_address&&"shipping-address"===e.id},validator:VueFormGenerator.validators.string},{type:"switch",label:wfacp_localization.fields.same_as_shipping,model:"same_as_shipping",textOn:wfacp_localization.global.active,textOff:wfacp_localization.global.inactive,styleClasses:"wfacp_full_width_fields",visible:function(e){return!0===e.is_address&&"address"===e.id}},{type:"input",inputType:"text",label:wfacp_localization.fields.address.lable,model:"same_as_shipping_label",hint:wfacp_localization.fields.same_as_shipping_label_hint,styleClasses:"wfacp_full_width_input",placeholder:"USA",visible:function(e){return!0===e.is_address&&"address"===e.id},validator:VueFormGenerator.validators.string}];return wfacp.hooks.applyFilters("wfacp_address_fields",e)}},{key:"getEditableFields",value:function(){var t=[{type:"input",inputType:"text",label:wfacp_localization.fields.label_field_label,model:"label",required:!0,validator:VueFormGenerator.validators.string},{type:"checkbox",label:wfacp_localization.fields.order_total_breakup_label,model:"default",hint:wfacp_localization.fields.order_total_breakup_hint,styleClasses:"wfacp_required_cls",visible:function(e){return"order_total"===e.id}},{type:"input",inputType:"text",label:wfacp_localization.fields.options_field_label,model:"options",required:!0,validator:VueFormGenerator.validators.string,visible:function(t){return e.inArray(t.field_type,["select","wfacp_radio"])>-1}},{type:"input",inputType:"text",label:wfacp_localization.fields.shipping_field_placeholder,hint:wfacp_localization.fields.shipping_field_placeholder_hint,model:"default",validator:VueFormGenerator.validators.string,visible:function(e){return"shipping_calculator"===e.id}},{type:"input",inputType:"text",label:wfacp_localization.fields.default_field_label,model:"default",validator:VueFormGenerator.validators.string,visible:function(t){return"billing_email"!==t.id&&!(e.inArray(t.field_type,["checkbox","address","wfacp_html"])>-1||!0===t.is_address||"product"===t.field_type)}},{type:"input",inputType:"text",label:wfacp_localization.settings.product_switching.you_save_text,model:"default",hint:wfacp_localization.fields.product_you_save_merge_tags,validator:VueFormGenerator.validators.string,visible:function(e){return"product"===e.field_type}},{type:"select",inputType:"select",label:wfacp_localization.fields.default_field_label,model:"default",selectOptions:{hideNoneSelectedText:!0},values:function(){return wfacp.tools.jsp(wfacp_localization.fields.default_field_checkbox_options)},visible:function(e){return"checkbox"===e.field_type}},{type:"input",inputType:"text",label:wfacp_localization.fields.placeholder_field_label,model:"placeholder",validator:VueFormGenerator.validators.string,visible:function(t){return!(e.inArray(t.field_type,["select","wfacp_radio","checkbox","hidden","date","address","product","wfacp_html"])>-1||!0===t.is_address)}},{type:"input",inputType:"text",label:wfacp_localization.settings.coupon.success_message_heading,model:"coupon_success_message_heading",hint:wfacp_localization.settings.coupon.success_message_heading_hint,validator:VueFormGenerator.validators.string,visible:function(e){return"order_coupon"===e.id}},{type:"checkbox",label:wfacp_localization.settings.coupon.style_heading,model:"coupon_style",styleClasses:"wfacp_required_cls",visible:function(e){return"order_coupon"===e.id}},{type:"checkbox",label:wfacp_localization.fields.show_on_thankyou,model:"show_custom_field_at_thankyou",styleClasses:"wfacp_required_cls",visible:function(e){return e.is_wfacp_field}},{type:"checkbox",label:wfacp_localization.fields.show_in_email,model:"show_custom_field_at_email",styleClasses:"wfacp_required_cls",visible:function(e){return e.is_wfacp_field}}];t=wfacp.hooks.applyFilters("wfacp_editable_fields",t);var i={type:"checkbox",label:wfacp_localization.fields.required_field_label,model:"required",styleClasses:"wfacp_required_cls",default:!0,visible:function(t){return"hidden"!==t.field_type&&!0!==t.is_address&&e.inArray(t.field_type,["product","wfacp_html"])<0}};return t.push(i),t}},{key:"updateField",value:function(e){if(0===wfacp.tools.ol(e))return!1;if(wfacp.tools.hp(this.layout_vue.fieldsets,e.step_name)&&wfacp.tools.hp(this.layout_vue.fieldsets[e.step_name][e.section],"fields")){var t={},i=wfacp.tools.jsp(e.field.options);if(wfacp.tools.ol(i)>0){for(var a in i){var s=i[a];t[s=s.trim()]=s}e.field.options=t}Vue.set(this.layout_vue.fieldsets[e.step_name][e.section].fields,e.index,e.field)}}},{key:"addFieldVue",value:function(t){if(!0!==this.add_field_model_open){this.add_field_model_open=!0;var i=this;return this.add_field_vue=new Vue({el:"#add-field-form",components:{"vue-form-generator":VueFormGenerator.component},methods:{defaultModel:function(){return{label:"",placeholder:"",name:"",cssready:"",field_type:"text",section_type:"advanced",options:"",default:"",show_custom_field_at_thankyou:!1,show_custom_field_at_email:!1,required:!0}},onSubmit:function(){var e=this;this.modal.startLoading();var t=new wfacp.ajax;if("wfacp_wysiwyg"==this.model.field_type){var a=new Date;this.model.name=a.getTime()}var s={fields:wfacp.tools.jsp(this.model),section:"billing",wfacp_id:i.id};t.ajax("add_field",s),t.success=function(e){!0===e.status&&i.addField(e.data)},t.complete=function(){e.modal.stopLoading(),i.modal_add_field.iziModal("close"),e.model=e.defaultModel()}}},data:{modal:t,isLoading:!1,wfacp_id:i.builder.id,model:{label:"",placeholder:"",name:"",cssready:"",field_type:"text",section_type:"advanced",options:"",default:"",show_custom_field_at_thankyou:!1,show_custom_field_at_email:!1,required:!0},schema:{fields:[{type:"select",label:wfacp_localization.fields.field_types_label,model:"field_type",values:function(){return wfacp.tools.jsp(wfacp_localization.fields.field_types)},selectOptions:{hideNoneSelectedText:!0}},{type:"input",inputType:"text",label:wfacp_localization.fields.label_field_label,model:"label",required:!0,validator:VueFormGenerator.validators.string},{type:"input",inputType:"text",label:wfacp_localization.fields.name_field_label,hint:wfacp_localization.fields.name_field_label_hint,model:"name",required:!0,visible:function(e){return"wfacp_wysiwyg"!==e.field_type},validator:VueFormGenerator.validators.string},{type:"input",inputType:"text",label:wfacp_localization.fields.options_field_label,model:"options",required:!0,visible:function(t){return e.inArray(t.field_type,["select","wfacp_radio"])>-1},validator:VueFormGenerator.validators.string},{type:"input",inputType:"text",label:wfacp_localization.fields.default_field_label,model:"default",validator:VueFormGenerator.validators.string,visible:function(t){return!(e.inArray(t.field_type,["checkbox","wfacp_wysiwyg"])>-1)}},{type:"select",label:wfacp_localization.fields.default_field_label,model:"default",validator:VueFormGenerator.validators.string,values:function(){return wfacp.tools.jsp(wfacp_localization.fields.default_field_checkbox_options)},visible:function(e){return"checkbox"===e.field_type},selectOptions:{hideNoneSelectedText:!0}},{type:"input",inputType:"text",label:wfacp_localization.fields.placeholder_field_label,model:"placeholder",validator:VueFormGenerator.validators.string,visible:function(t){return e.inArray(t.field_type,["select","wfacp_radio","checkbox","hidden","date","wfacp_wysiwyg"])<0}},{type:"checkbox",label:wfacp_localization.fields.show_on_thankyou,model:"show_custom_field_at_thankyou",styleClasses:"wfacp_required_cls"},{type:"checkbox",label:wfacp_localization.fields.show_in_email,model:"show_custom_field_at_email",styleClasses:"wfacp_required_cls"},{type:"checkbox",label:wfacp_localization.fields.required_field_label,model:"required",styleClasses:["wfacp_required_cls","wfacp_full_width_fields"],visible:function(e){return"hidden"!==e.field_type&&"wfacp_wysiwyg"!==e.field_type}}]},formOptions:{validateAfterChanged:!0}}}),this.add_field_vue}}},{key:"editFieldVue",value:function(){if(!0===this.edit_field_model_open)return this.edit_field_vue;this.edit_field_model_open=!0;var t=this,i={};for(var a in wfacp_data.product_switcher_data.settings)e.inArray(wfacp_data.product_switcher_data.settings[a],["false","true",!1,!0])>-1?i[a]=wfacp.tools.string_to_bool(wfacp_data.product_switcher_data.settings[a]):i[a]=wfacp_data.product_switcher_data.settings[a];for(var s in wfacp_data.product_switcher_data.products)wfacp_data.product_switcher_data.products[s].enable_delete=wfacp.tools.string_to_bool(wfacp_data.product_switcher_data.products[s].enable_delete);return this.edit_field_vue=new Vue({el:"#edit-field-form",components:{"vue-form-generator":VueFormGenerator.component},methods:{defaultModel:function(){return{field_type:"text",section_type:"billing",label:"",placeholder:"",cssready:"",options:"",is_address:!1,id:"",default:"",is_wfacp_field:!1,required:!0}},setData:function(){var e=t.current_edit_field;if(0===wfacp.tools.ol(e))return!0;this.model.label=e.field.label,this.model.placeholder=void 0!==e.field.placeholder?e.field.placeholder:"",wfacp.tools.hp(e.field,"cssready")?this.model.cssready=e.field.cssready.join(","):this.model.cssready="",this.model.section_type=e.field.field_type,this.model.field_type=e.field.type,this.model.is_wfacp_field=!!wfacp.tools.hp(e.field,"is_wfacp_field"),wfacp.tools.ol(e.field.options)>0?this.model.options=wfacp.tools.kys(e.field.options).join("|"):this.model.options="",this.model.default=e.field.default,this.model.required=wfacp.tools.string_to_bool(e.field.required),this.model.id=e.field.id,"product_switching"===this.model.id&&(this.products=wfacp.tools.jsp(this.products_updated),this.default_products=wfacp.tools.jsp(this.default_products_updated),this.product_settings=wfacp.tools.jsp(this.product_settings_updated)),"wfacp_wysiwyg"===this.model.field_type&&(this.model.required=!1),this.mergeDefaultAddressField(e),this.model=wfacp.hooks.applyFilters("wfacp_field_data_merge_with_model",this.model,e),t.modal_edit_field.WoofunnelModal("open")},mergeDefaultAddressField:function(i){if(this.model.is_address=!1,"address"===i.field.id||"shipping-address"===i.field.id){this.model.is_address=!0;var a=i.field.fields_options,s=i.field.field_type,l=t.available_fields[s][i.field.id].fields_options;for(var o in l){var n=l[o];for(var d in wfacp.tools.hp(a,o)&&(n=a[o]),n)if(e.inArray(n[d],["false","true",!0,!1])>-1){var r=wfacp.tools.string_to_bool(n[d]);Vue.set(this.model,d,r)}else Vue.set(this.model,d,n[d])}}},mergeAddressField:function(e){if(this.model.is_address=!1,"address"===e.field.id||"shipping-address"===e.field.id){var i=e.field.field_type,a=wfacp.tools.jsp(t.available_fields[i][e.field.id].fields_options),s=e.field.fields_options;for(var l in a){var o=a[l];for(var n in wfacp.tools.hp(s,l)&&(o=s[l]),o)o[n]=this.model[n];a[l]=o}e.field.fields_options=a}return e},onSubmit:function(){var e=wfacp.tools.jsp(this.model),i=t.current_edit_field;i.field.label=e.label,i.field.placeholder=e.placeholder,i.field.cssready=e.cssready.split(","),i.field.type=e.field_type,i.field.field_type=e.section_type,i.field.options=e.options.split("|"),i.field.default="",wfacp.tools.hp(e,"default")&&(i.field.default=e.default),i.field.required=e.required,i=this.mergeAddressField(i),i=wfacp.hooks.applyFilters("wfacp_before_field_save",i,e),i=wfacp.tools.jsp(i),wfacp.tools.hp(i.field,"is_wfacp_field")&&"hidden"==i.field.type&&(i.field.required=!1),t.updateField(i),"product_switching"===i.field.id&&(this.products_updated=wfacp.tools.jsp(this.products),this.default_products_updated=wfacp.tools.jsp(this.default_products),this.product_settings_updated=wfacp.tools.jsp(this.product_settings)),this.model=this.defaultModel(),t.modal_edit_field.WoofunnelModal("close")}},data:{product_switcher_updated:!1,wfacp_id:t.builder.id,current_field_id:"default",products:wfacp.tools.jsp(wfacp_data.product_switcher_data.products),products_updated:wfacp.tools.jsp(wfacp_data.product_switcher_data.products),is_hide_additional_information_updated:wfacp.tools.jsp(wfacp_data.product_switcher_data.is_hide_additional_information),is_hide_additional_information:wfacp.tools.jsp(wfacp_data.product_switcher_data.is_hide_additional_information),additional_information_title_updated:wfacp.tools.jsp(wfacp_data.product_switcher_data.additional_information_title),additional_information_title:wfacp.tools.jsp(wfacp_data.product_switcher_data.additional_information_title),default_products:[],default_products_updated:wfacp.tools.jsp(wfacp_data.product_switcher_data.default_products),product_settings:wfacp.tools.jsp(i),product_settings_updated:wfacp.tools.jsp(i),model_title:wfacp_localization.fields.add_field,model_sub_title:"",model_field_type:"",model:{field_type:"text",section_type:"billing",options:"",default:"",label:"",placeholder:"",cssready:"",is_address:!1,is_wfacp_field:!1,required:!0},schema:{groups:[{fields:t.getEditableFields()},{fields:t.getAddressFields()}]},formOptions:{validateAfterChanged:!0}}}),this.edit_field_vue}},{key:"addSectionVue",value:function(e){if(!0!==this.add_section_model_open){this.add_section_model_open=!0;var t=this;return this.add_section_vue=new Vue({el:"#add-section-form",components:{"vue-form-generator":VueFormGenerator.component},methods:{defaultModel:function(){return{name:"",classes:wfacp_localization.fields.section.default_classes,sub_heading:""}},clearData:function(){this.model=this.defaultModel()},setData:function(){var e=t.getSection(t.step_name,t.field_index);null!==e?(this.btn_name=wfacp_localization.update_btn,this.model.name=e.name,this.model.classes=e.class,this.model.sub_heading=e.sub_heading,this.btn_name=wfacp_localization.fields.update_btn):this.btn_name=wfacp_localization.fields.add_new_btn},onSubmit:function(){var e=wfacp.tools.jsp(this.model);null==t.field_index?t.addSection(t.step_name,{name:e.name,class:e.classes,sub_heading:e.sub_heading}):t.updateSection(t.step_name,t.field_index,{name:e.name,class:e.classes,sub_heading:e.sub_heading}),this.model=this.defaultModel(),t.modal_add_section.iziModal("close")}},data:{modal:e,isLoading:!1,step_name:"single_step",btn_name:wfacp_localization.fields.section.add_heading,wfacp_id:t.builder.id,model:{name:"",classes:wfacp_localization.fields.section.default_classes,sub_heading:""},schema:{fields:[{type:"input",inputType:"text",label:wfacp_localization.fields.section.fields.heading,model:"name",required:!0,validator:VueFormGenerator.validators.string},{type:"input",inputType:"text",label:wfacp_localization.fields.section.fields.sub_heading,hint:wfacp_localization.fields.section.default_sub_heading,model:"sub_heading",validator:VueFormGenerator.validators.string},{type:"input",inputType:"text",label:wfacp_localization.fields.section.fields.classes,model:"classes"}]},formOptions:{validateAfterChanged:!0}}}),this.add_section_vue}}},{key:"model",value:function(){var t=this;this.modal_add_field=e("#modal-add-field"),this.modal_add_field.length>0&&this.modal_add_field.iziModal({title:wfacp_localization.fields.add_field,headerColor:"#6dbe45",background:"#efefef",borderBottom:!1,width:600,overlayColor:"rgba(0, 0, 0, 0.6)",transitionIn:"fadeInDown",transitionOut:"fadeOutDown",navigateArrows:"false",onOpening:function(e){e.startLoading()},onOpened:function(e){e.stopLoading(),t.addFieldVue(e)},onClosed:function(e){}}),this.modal_edit_field=e("#modal-edit-field"),this.modal_edit_field.length>0&&(this.modal_edit_field.WoofunnelModal(),this.modal_edit_field.on("onopend",function(){e(".wfacp_hint").remove(),setTimeout(function(){var i=t.current_edit_field.field.id,a=wfacp_localization;if("address"===i||"shipping-address"===i){var s=a[i];for(var l in s){var o=e(".wfacp_"+l);if(o.length>0)o.children(".hint").remove(),o.append('<div class="hint wfacp_hint">'+s[l].hint+"</div>")}}},100)}),this.modal_edit_field.on("onopend",function(){setTimeout(function(){var i=e("#product_switching");i.length>0&&i.find(".wfacp_tabs .wfacp_tab_link").on("click",function(t){t.preventDefault(),e(".wfacp_tab_link").removeClass("activelink"),e(this).addClass("activelink");var i=e(this).data("tag");e(".wfacp_tab_container").removeClass("wfacp_tab_active").addClass("wfacp_tab_hide"),e(i).addClass("wfacp_tab_active").removeClass("wfacp_tab_hide")});var a=t.editFieldVue();wfacp.tools.ol(a.products)>0&&wfacp.tools.kys(a.products).forEach(function(e,i){var a="whats_included_"+e;wp.editor.remove(a);var s=wfacp.tools.jsp(wfacp.editorConfig);s.tinymce.init_instance_callback=function(e){e.on("Change",function(i){var a=e.targetElm.getAttribute("product_id");t.editFieldVue().products[a].whats_included=e.getContent()})},wp.editor.initialize(a,s)})},600),setTimeout(function(){if(e("#wfacp_wysiwyg_editor").length>0){wp.editor.remove("wfacp_wysiwyg_editor");var i=wfacp.tools.jsp(wfacp.editorConfig);i.tinymce.init_instance_callback=function(e){e.on("Change",function(i){var a=t.editFieldVue();Vue.set(a.model,"default",e.getContent())})},wp.editor.initialize("wfacp_wysiwyg_editor",i)}})}),this.modal_edit_field.on("onclosed",function(){var i=t.editFieldVue();if(i.products=i.products_updated,e("#wfacp_wysiwyg_editor").length>0){wp.editor.remove("wfacp_wysiwyg_editor")}})),this.modal_add_section=e("#modal-add-section"),this.modal_add_section.length>0&&this.modal_add_section.iziModal({headerColor:"#6dbe45",background:"#efefef",borderBottom:!1,width:600,overlayColor:"rgba(0, 0, 0, 0.6)",transitionIn:"fadeInDown",transitionOut:"fadeOutDown",navigateArrows:"false",onOpening:function(e){e.startLoading()},onOpened:function(e){e.stopLoading(),t.addSectionVue(e),t.add_section_vue.setData()},onClosed:function(e){t.add_section_vue.clearData()}})}},{key:"field_data_merge_with_model",value:function(e,t){return wfacp.tools.hp(e,"id")&&"order_coupon"===e.id&&(e.coupon_success_message_heading=t.field.coupon_success_message_heading,e.coupon_remove_message_heading=t.field.coupon_remove_message_heading,e.coupon_style=wfacp.tools.string_to_bool(t.field.coupon_style)),wfacp.tools.hp(e,"is_wfacp_field")&&1==e.is_wfacp_field&&(e.show_custom_field_at_thankyou=wfacp.tools.string_to_bool(t.field.show_custom_field_at_thankyou),e.show_custom_field_at_email=wfacp.tools.string_to_bool(t.field.show_custom_field_at_email)),e}},{key:"wfacp_before_field_save",value:function(e,t){return wfacp.tools.hp(t,"id")&&"order_coupon"===t.id&&(e.field.coupon_success_message_heading=t.coupon_success_message_heading,e.field.coupon_remove_message_heading=t.coupon_remove_message_heading,e.field.coupon_style=wfacp.tools.string_to_bool(t.coupon_style)),wfacp.tools.hp(t,"is_wfacp_field")&&1==t.is_wfacp_field&&(e.field.show_custom_field_at_thankyou=t.show_custom_field_at_thankyou,e.field.show_custom_field_at_email=t.show_custom_field_at_email),e}}]),t}(),a=function(){function t(e){_classCallCheck(this,t),null!=document.getElementById("wfacp_design_container")&&(this.id=e.id,this.selected=e.design.selected,this.selected_type=e.design.selected_type,this.designs=e.design.designs,this.design_types=e.design.design_types,this.main(),this.model())}return _createClass(t,[{key:"main",value:function(){var e=this;return wfacp.tools.hp(this.designs,this.selected_type)&&wfacp.tools.hp(this.designs[this.selected_type],this.selected)||(this.selected_type="pre_built",this.selected="shopcheckout"),this.main=new Vue({el:"#wfacp_design_container",methods:{setTemplateType:function(e){Vue.set(this,"current_template_type",e)},setTemplate:function(e,t){Vue.set(this,"selected",e),Vue.set(this,"selected_type",t),wfacp.hooks.doAction("wfacp_set_template",e,t),this.save()},showPopup:function(t){void 0!==t.large_img&&(e.show_design_model.find(".iziModal-content").html("<img src='"+t.large_img+"'>"),e.show_design_model.iziModal("setTitle",t.name),e.show_design_model.iziModal("open"))},save:function(){var t=this,i=new wfacp.ajax,a={selected_type:this.current_template_type,selected:this.selected,wfacp_id:e.id};i.ajax("save_design",a),wfacp.show_spinner(),i.success=function(e){wfacp.show_data_save_model(e.msg),t.selected_type=t.current_template_type}}},data:{current_template_type:this.selected_type,selected_type:this.selected_type,designs:this.designs,design_types:this.design_types,selected:this.selected,description:this.description}}),this.main}},{key:"model",value:function(){this.show_design_model=e("#modal-show-design-template"),this.show_design_model.length>0&&this.show_design_model.iziModal({headerColor:"#6dbe45",background:"#efefef",borderBottom:!1,width:600,overlayColor:"rgba(0, 0, 0, 0.6)",transitionIn:"fadeInDown",transitionOut:"fadeOutDown",navigateArrows:"false",onOpening:function(e){e.startLoading()},onOpened:function(e){e.stopLoading()},onClosed:function(e){}})}}]),t}(),s=function(){function t(e){_classCallCheck(this,t),null!=document.getElementById("modal-checkout-page")&&(this.add_new_model_open=!1,this.id=wfacp.tools.hp(e,"id")?e.id:0,this.name=wfacp.tools.hp(e,"name")?e.name:"",this.post_name=wfacp.tools.hp(e,"post_name")?e.post_name:"",this.base_url=wfacp.tools.hp(e,"base_url")?e.base_url:"",this.model())}return _createClass(t,[{key:"main",value:function(t){if(!1===this.add_new_model_open){var i=this;return this.add_new_model_open=!0,this.add_new=new Vue({el:"#add-new-form",components:{"vue-form-generator":VueFormGenerator.component},methods:{defaultModel:function(){return{name:""}},clearData:function(){this.model=this.defaultModel()},onSubmit:function(){var t=this;this.modal.startLoading();var a=this.model.name,s=new wfacp.ajax,l={wfacp_name:a,wfacp_id:i.id,post_name:this.model.post_name};s.ajax("add_checkout_page",l),s.success=function(a){!0===a.status&&"#"!==a.redirect_url&&(t.modal.stopLoading(),e("#add-new-form").hide(),e(".wfacp-funnel-create-success-wrap").show(),setTimeout(function(){window.location.href=a.redirect_url},1e3)),i.id>0&&(t.modal.stopLoading(),i.add_new_page_model.iziModal("close"),e(".wfacp_page_title").text(t.model.name),e(".wfacp-preview").attr("href",a.new_url))}}},data:{modal:t,btn_name:this.id>0?wfacp_localization.global.edit_checkout_btn:wfacp_localization.global.add_checkout_btn,model:{id:this.id,name:i.name,post_name:i.post_name,post_url:i.post_url,base_url:i.base_url},schema:{fields:[{type:"input",inputType:"text",label:wfacp_localization.global.add_checkout.heading,model:"name",required:!0,validator:VueFormGenerator.validators.string},{type:"input",inputType:"text",label:wfacp_localization.global.add_checkout.checkout_url_slug,model:"post_name",required:!0,styleClasses:["wfacp_checkout_url"],validator:VueFormGenerator.validators.string,visible:function(e){return e.id>0}}]},formOptions:{validateAfterChanged:!0}}}),this.add_new}}},{key:"model",value:function(){var t,i,a,s=this;t=/([^&=]+)=?([^&]*)/g,i=/\+/g,a=function(e){return decodeURIComponent(e.replace(i," "))},jQuery.parseParams=function(e){for(var i,s={};i=t.exec(e);){var l=a(i[1]),o=a(i[2]);"[]"===l.substring(l.length-2)?(s[l=l.substring(0,l.length-2)]||(s[l]=[])).push(o):s[l]=o}return s},e(".woofunnels_page_wfacp .icl_translations a").on("click",function(t){if(e(this).find(".otgs-ico-add").length>0){var i=e(this).attr("href");if(i=i.replace("post-new.php?",""),t.preventDefault(),"object"==_typeof(i=e.parseParams(i))&&wfacp.tools.ol(i)>0){t.preventDefault();var a=new wfacp.ajax;a.ajax("make_wpml_duplicate",i),a.success=function(e){1==e.status?window.location.href=e.redirect_url:alert(e.msg)}}}}),this.add_new_page_model=e("#modal-checkout-page"),this.add_new_page_model.length>0&&this.add_new_page_model.iziModal({title:this.id>0?wfacp_localization.global.edit_checkout_page:wfacp_localization.global.add_checkout_page,headerColor:"#6dbe45",background:"#efefef",borderBottom:!1,width:600,overlayColor:"rgba(0, 0, 0, 0.6)",transitionIn:"fadeInDown",transitionOut:"fadeOutDown",navigateArrows:"false",onOpening:function(e){e.startLoading()},onOpened:function(e){e.stopLoading(),s.main(e)},onClosed:function(e){}})}}]),t}(),l=function(){function t(e){_classCallCheck(this,t),this.id=e.id,this.settings=e.settings,null!=document.getElementById("wfacp_setting_container")&&this.main()}return _createClass(t,[{key:"getFields",value:function(){var e=[{fields:[{type:"label",label:wfacp_localization.settings.coupons.heading,hint:wfacp_localization.settings.coupons.sub_heading,styleClasses:"wfacp_setting_heading"},{type:"radios",label:wfacp_localization.settings.coupons.disable_coupon,model:"disable_coupon",values:function(){return wfacp_localization.settings.radio_fields}},{type:"radios",label:wfacp_localization.settings.coupons.auto_add_coupon_heading,model:"enable_coupon",values:function(){return wfacp_localization.settings.radio_fields}},{type:"input",inputType:"text",model:"coupons",label:wfacp_localization.settings.coupons.coupon_heading,placeholder:wfacp_localization.settings.coupons.search_placeholder,required:!0,visible:function(e){return"true"===e.enable_coupon}}]},{fields:[{type:"label",label:wfacp_localization.settings.advanced.heading,hint:wfacp_localization.settings.advanced.sub_heading,styleClasses:"wfacp_setting_heading"},{type:"radios",label:wfacp_localization.settings.advanced.close_after,model:"close_after_x_purchase",values:function(){return wfacp_localization.settings.radio_fields}},{type:"input",inputType:"text",model:"total_purchased_allowed",label:wfacp_localization.settings.advanced.total_purchased_allowed,hint:wfacp_localization.settings.advanced.total_purchased_allowed_hint,placeholder:"100",required:!0,visible:function(e){return"true"===e.close_after_x_purchase}},{type:"input",inputType:"URL",model:"total_purchased_redirect_url",label:wfacp_localization.settings.advanced.total_purchased_redirect_url,hint:wfacp_localization.settings.advanced.total_purchased_redirect_url_hint,placeholder:"http://",required:!0,visible:function(e){return"true"===e.close_after_x_purchase}},{type:"radios",label:wfacp_localization.settings.advanced.close_checkout_after_date,model:"close_checkout_after_date",values:function(){return wfacp_localization.settings.radio_fields}},{type:"input",inputType:"text",label:wfacp_localization.settings.advanced.close_checkout_on,model:"close_checkout_on",styleClasses:"wfacp_date_field",hint:wfacp_localization.settings.advanced.close_checkout_on_hint,validator:VueFormGenerator.validators.date,required:!0,visible:function(e){return"true"===e.close_checkout_after_date}},{type:"input",inputType:"URL",model:"close_checkout_redirect_url",label:wfacp_localization.settings.advanced.close_checkout_redirect_url,hint:wfacp_localization.settings.advanced.close_checkout_redirect_url_hint,placeholder:"http://",required:!0,visible:function(e){return"true"===e.close_checkout_after_date}},{type:"label",hint:wfacp_localization.settings.advanced.note_for_global_checkout,styleClasses:"wfacp_setting_heading wfacp_global_checkout_note"}]},{fields:[{type:"label",label:wfacp_localization.settings.scripts.heading,hint:wfacp_localization.settings.scripts.sub_heading,styleClasses:"wfacp_setting_heading"},{type:"textArea",label:wfacp_localization.settings.scripts.header_heading,placeholder:wfacp_localization.settings.scripts.header_script_placeholder,model:"header_script",rows:4,validator:VueFormGenerator.validators.string},{type:"textArea",label:wfacp_localization.settings.scripts.footer_heading,placeholder:wfacp_localization.settings.scripts.footer_script_placeholder,model:"footer_script",rows:4,validator:VueFormGenerator.validators.string}]}];return wfacp.hooks.applyFilters("wfacp_settings_fields",e,this)}},{key:"getModels",value:function(){var e={header_script:this.settings.header_script,footer_script:this.settings.footer_script,coupons:this.settings.coupons,enable_coupon:this.settings.enable_coupon,disable_coupon:this.settings.disable_coupon,hide_quantity_switcher:this.settings.hide_quantity_switcher,hide_quick_view:this.settings.hide_quick_view,hide_you_save:this.settings.hide_you_save,close_after_x_purchase:this.settings.close_after_x_purchase,total_purchased_allowed:this.settings.total_purchased_allowed,total_purchased_redirect_url:this.settings.total_purchased_redirect_url,close_checkout_after_date:this.settings.close_checkout_after_date,close_checkout_on:this.settings.close_checkout_on,close_checkout_redirect_url:this.settings.close_checkout_redirect_url,note_for_global_checkout:this.settings.note_for_global_checkout};return e=wfacp.hooks.applyFilters("wfacp_settings_data_model",e,this)}},{key:"main",value:function(){var t=this;return this.settings_vue=new Vue({el:"#wfacp_setting_container",components:{"vue-form-generator":VueFormGenerator.component,Multiselect:window.VueMultiselect.default},created:function(){setTimeout(function(){e(".wfacp_date_field .form-control").attr("type","date")},100)},methods:{changed:function(){setTimeout(function(){e(".wfacp_date_field .form-control").attr("type","date")},100)},save:function(){var e=new wfacp.ajax,i=wfacp.tools.jsp(this.model);""!==i.close_checkout_on&&i.close_checkout_on>0&&(i.close_checkout_on=parseInt(i.close_checkout_on/1e3));var a={wfacp_id:t.id,settings:i};a=wfacp.hooks.applyFilters("wfacp_before_settings_data_saved",a,this),e.ajax("save_settings",a),wfacp.show_spinner(),e.success=function(e){wfacp.show_data_save_model(e.msg)}}},data:{search_timeout:!1,isLoading:!1,model:this.getModels(),formOptions:{},schema:{groups:this.getFields()}}}),this.settings_vue}}]),t}(),o=function(){function t(e){_classCallCheck(this,t),this.id=e.id,this.schema=e.global_settings.schema,this.model=e.global_settings.model,null!=document.getElementById("wfacp_global_settings")&&this.main()}return _createClass(t,[{key:"main",value:function(){var t=this,i=this;for(var a in this.model)"true"===this.model[a]?this.model[a]=!0:"false"===this.model[a]&&(this.model[a]=!1);return this.settings_vue=new Vue({el:"#wfacp_global_settings",components:{"vue-form-generator":VueFormGenerator.component,Multiselect:window.VueMultiselect.default},created:function(){setTimeout(function(){e(".form-group.field-checkbox").each(function(){var t=e(this).find("label"),i=t.text();t.remove(),e(this).find(".field-wrap").append(i)});for(var i=0;i<t.schema.groups.length;i++)for(var a=t.schema.groups[i].fields,s=0;s<a.length;s++)wfacp.tools.hp(a[s],"hint")&&wfacp.tools.hp(a[s],"styleClasses")&&a[s].styleClasses.indexOf("wfacp_html_hint")>-1&&e("."+a[s].styleClasses.join(".")).find(".hint").html(a[s].hint)},1e3)},methods:{onSubmit:function(){var e=new wfacp.ajax,t={wfacp_id:i.id,settings:this.model};this.model.rewrite_slug!==wfacp_data.checkout_page_slug?(e.ajax("save_global_settings",t),wfacp.show_spinner(),e.success=function(e){wfacp.show_data_save_model(e.msg)}):alert(wfacp_data.checkout_page_slug_error)}},data:{model:this.model,search_timeout:!1,isLoading:!1,schema:this.schema,formOptions:{}}}),this.settings_vue}}]),t}(),n=function(){function n(e){_classCallCheck(this,n),this.el="#wfacp_control",this.setupData(e),this.initializeVue(),this.model()}return _createClass(n,[{key:"setupData",value:function(e){if(wfacp.tools.ol(e)>0)for(var t in e)this[t]=e[t];wfacp.hooks.doAction("after_setup_data",this,e)}},{key:"initializeVue",value:function(){wfacp.products=new t(this),wfacp.fields=new i(this),wfacp.design=new a(this),wfacp.add_new_page=new s(this),wfacp.settings=new l(this),wfacp.global_settings=new o(this),this.jQuery_events(),wfacp.hooks.doAction("wfacp_loaded",this)}},{key:"getData",value:function(){return this.data}},{key:"jQuery_events",value:function(){if(e(".wfacp_checkout_page_status").on("change",function(t){var i=!1;e(this).is(":checked")&&(i=!0);var a=e(".wfacp_head_funnel_state_on"),s=e(".wfacp_head_funnel_state_off");i?(a.show(),s.hide()):(a.hide(),s.show());var l=e(this).data("id"),o=new wfacp.ajax;o.ajax("update_page_status",{post_status:i,id:l}),o.success=function(e){}}),e("#the-list .wfacp_funnels .wfacp-preview").on("click",function(){var t=this,i=e(this).attr("data-id"),a=e(this);if(a.addClass("disabled"),i>0){var s=new wfacp.ajax;s.ajax("preview_details",{wfacp_id:i}),s.success=function(i){!0===i.status&&e(t).WCBackboneModal({template:"wfacp-page-popup",variable:i}),a.removeClass("disabled")}}return!1}),e(".wfacp-product-widget-tabs").length>0){var t=e(".wfacp-product-widget-tabs .wfacp-tab-title");t.on("click",function(t){var i=e(this).closest(".wfacp-product-widget-tabs"),a=e(this).attr("data-tab");i.find(".wfacp-tab-title").removeClass("wfacp-active"),i.find(".wfacp-tab-title[data-tab="+a+"]").addClass("wfacp-active"),e(i).find(".wfacp-tab-content").removeClass("wfacp-activeTab"),e(i).find(".wfacp_forms_global_settings .vue-form-generator fieldset").hide(),e(i).find(".wfacp_forms_global_settings .vue-form-generator fieldset").eq(a-1).addClass("wfacp-activeTab"),e(i).find(".wfacp_forms_global_settings .vue-form-generator fieldset").eq(a-1).show()}),t.eq(0).trigger("click")}e(".wfacp_delete_checkout_page").on("click",function(t){t.preventDefault();var i=e(this).attr("href"),a=wfacp.swal({text:wfacp_localization.global.delete_checkout_page,type:"error",confirmButtonText:wfacp_localization.global.confirm_button_text,cancelButtonText:wfacp_localization.global.cancel_button_text});a.then(function(e){wfacp.tools.hp(e,"value")&&(window.location.href=i)}),a.catch(function(){})})}},{key:"model",value:function(){wfacp.show_saved_model=e("#modal-saved-data-success"),0!==wfacp.show_saved_model.length&&wfacp.show_saved_model.iziModal({title:wfacp_localization.global.data_saving,icon:"icon-check",headerColor:"#6dbe45",background:"#6dbe45",borderBottom:!1,width:600,timeout:4e3,timeoutProgressbar:!0,transitionIn:"fadeInUp",transitionOut:"fadeOutDown",bottom:0,loop:!0,pauseOnHover:!0,overlay:!1,onOpening:function(t){var i=e(".wfacp_spinner.spinner");i.length>0&&i.css("visibility","hidden")},onClosed:function(){wfacp.show_saved_model.iziModal("setTitle",wfacp_localization.global.data_saving);var t=e(".wfacp_spinner.spinner");t.is(":visible")&&t.css("visibility","hidden")}})}}]),n}();e(window).on("load",function(){Vue.component("multiselect",window.VueMultiselect.default),window.builder=new n(wfacp_data),setTimeout(function(){e(".wfacp_loader").hide()},600),e(".wfacp_allow_panel_close .hndle").on("click",function(){e(this);e(this).parents(".wfacp_allow_panel_close").toggleClass("closed")});var t=e("a[data-original-link]");t.length>0&&t.each(function(){var t=e(this).data("original-link");e(this).attr("href",t)})});var d={init:function(t){var i=this,a=e(this);setTimeout(function(t){t.find(".iziModal-button-close").on("click",function(){e(this).trigger("onclosed"),e("html").removeClass("iziModal-isAttached"),e(".wfacp_overlay").removeClass("wfacp_overlay_active"),t.fadeOut()}),e(i).trigger("oninit")},300,a)},open:function(){var t=this,i=e(this);setTimeout(function(){i.fadeIn(),i.addClass("hasScroll");var a=e(t).find(".iziModal-content").height(),s=e(window).height();a>s?(a=s-20,e(t).find(".iziModal-wrap").height(a-75)):i.find(".iziModal-wrap").height(a-75),i.height(a),e("html").addClass("iziModal-isAttached"),e(".wfacp_overlay").addClass("wfacp_overlay_active")},150),e(this).trigger("onopend")},close:function(){e(this).trigger("onclosed"),e("html").removeClass("iziModal-isAttached"),e(".wfacp_overlay").removeClass("wfacp_overlay_active"),e(this).fadeOut()},setSubtitle:function(e){}};e.fn.WoofunnelModal=function(t){return d[t]?d[t].apply(this,Array.prototype.slice.call(arguments,1)):"object"!==_typeof(t)&&t?void e.error("Method "+t+" does not exist on jQuery.tooltip"):d.init.apply(this,arguments)},function(){if(0!=wfacp.tools.hp(wfacp_data,"layout")){var e=wfacp_data.layout,t={single_step:[],two_step:[],third_step:[]},i=["product","wfacp_html","wfacp_end_divider","password","wfacp_start_divider"],a=wfacp_data.layout.steps,s=[];"two_step"===wfacp_data.layout.current_step?s=["single_step"]:"third_step"===wfacp_data.layout.current_step&&(s=["single_step","two_step"]),wfacp.hooks.addFilter("wfacp_settings_fields",function(t){if(0===s.length){var i={fields:[{type:"label",label:wfacp_localization.settings.preview_field_admin_heading,hint:wfacp_localization.settings.preview_field_admin_heading_hint,styleClasses:"wfacp_setting_heading wfacp_admin_preview_feilds_wrap"},{type:"label",hint:wfacp_localization.settings.preview_field_admin_note,styleClasses:"wfacp_setting_heading wfacp_preview_note"}]};return t.push(i),t}var o={fields:[{type:"label",label:wfacp_localization.settings.preview_field_admin_heading,hint:wfacp_localization.settings.preview_field_admin_heading_hint,styleClasses:"wfacp_setting_heading preview_heading_wrap"}]};t.push(o);for(var n={fields:[]},d=0;d<s.length;d++)for(var r=s[d],c=e.fieldsets[r],_=(a[r].name,0);_<c.length>0;_++){var p=c[_].fields;for(var f in p){var u=p[f];l(u)||n.fields.push({type:"checkbox",label:u.label,model:u.id,styleClasses:"wfacp_preview_fields"})}}console.log("temp_array",n),n.fields.length>0&&t.push(n);var h={fields:[{type:"input",inputType:"text",label:wfacp_localization.settings.preview_section_heading,model:"preview_section_heading",styleClasses:"preview_section_heading_wrap wfaco_preview_top_spacing",validator:VueFormGenerator.validators.string},{type:"input",inputType:"text",label:wfacp_localization.settings.preview_section_subheading,model:"preview_section_subheading",styleClasses:"preview_section_subheading_wrap",validator:VueFormGenerator.validators.string}]};return t.push(h),t}),wfacp.hooks.addFilter("wfacp_settings_data_model",function(i,a){if(0===s.length)return i;for(var o=0;o<s.length;o++)for(var n=s[o],d=e.fieldsets[n],r=0;r<d.length>0;r++){var c=d[r].fields;for(var _ in c){var p=c[_];l(p)||(wfacp.tools.hp(a.settings.show_on_next_step[n],p.id)&&"true"==a.settings.show_on_next_step[n][p.id]?i[p.id]=!0:i[p.id]=!1,t[n].push(p.id))}}return wfacp.tools.hp(a.settings,"preview_section_heading")&&(i.preview_section_heading=a.settings.preview_section_heading),wfacp.tools.hp(a.settings,"preview_section_subheading")&&(i.preview_section_subheading=a.settings.preview_section_subheading),i}),wfacp.hooks.addFilter("wfacp_before_settings_data_saved",function(e,i){for(var a in e.settings.show_on_next_step={},t)if(0!==t[a].length){e.settings.show_on_next_step[a]={};for(var s=t[a],l=0;l<s.length;l++){var o=s[l];wfacp.tools.hp(e.settings,o)&&(e.settings.show_on_next_step[a][o]=e.settings[o],delete e.settings[o])}}return e})}function l(e){return i.indexOf(e.type)>-1&&"shipping_calculator"!==e.id}}()}(jQuery);