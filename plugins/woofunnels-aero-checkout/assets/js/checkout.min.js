"use strict";function _typeof(e){return(_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}!function(e){wfacp_frontend.hooks={hooks:{action:{},filter:{}},addAction:function(e,a,t,o){this.addHook("action",e,a,t,o)},addFilter:function(e,a,t,o){this.addHook("filter",e,a,t,o)},doAction:function(e){this.doHook("action",e,arguments)},applyFilters:function(e){return this.doHook("filter",e,arguments)},removeAction:function(e,a){this.removeHook("action",e,a)},removeFilter:function(e,a,t){this.removeHook("filter",e,a,t)},addHook:function(e,a,t,o,i){void 0==this.hooks[e][a]&&(this.hooks[e][a]=[]);var c=this.hooks[e][a];void 0==i&&(i=a+"_"+c.length),void 0==o&&(o=10),this.hooks[e][a].push({tag:i,callable:t,priority:o})},doHook:function(e,a,t){if(t=Array.prototype.slice.call(t,1),void 0!=this.hooks[e][a]){var o,i=this.hooks[e][a];i.sort(function(e,a){return e.priority-a.priority});for(var c=0;c<i.length;c++)"function"!=typeof(o=i[c].callable)&&(o=window[o]),"action"==e?o.apply(null,t):t[0]=o.apply(null,t)}if("filter"==e)return t[0]},removeHook:function(e,a,t,o){if(void 0!=this.hooks[e][a])for(var i=this.hooks[e][a],c=i.length-1;c>=0;c--)void 0!=o&&o!=i[c].tag||void 0!=t&&t!=i[c].priority||i.splice(c,1)}},e.wfacp_step_scrolling=function(a){a.length&&e("html, body").animate({scrollTop:a.offset().top-100},700)},void 0===e.fn.block&&(e.fn.block=function(e){},e.fn.unblock=function(e){},e.scroll_to_notices=function(){});var a={message:null,overlayCSS:{background:"#fff",opacity:.6}},t=window.innerWidth,o=!1,i=0===parseFloat(wfacp_frontend.cart_total),c="1"==wfacp_frontend.cart_is_virtual,n=!1,r=e(".wfacp_err_message"),s=e("form.checkout"),p=Object.create(wfacp_frontend.settings),_=!1,d=null,l=null,f=null,u=!1,w=!1,h={init:function(){e(document.body).off("click",".woocommerce-remove-coupon").on("click",".woocommerce-remove-coupon",this.remove_coupon),e(document.body).on("click",".wfacp_main_showcoupon",h.show_coupon_form),e("form.checkout_coupon").off("submit").on("submit",this.submit)},submit:function(t){t.preventDefault();var o=e(this);if(""===o.find('input[name="coupon_code"]').val())return o.find('input[name="coupon_code"]').addClass("wfacp_coupon_failed_error"),!1;if(o.find('input[name="coupon_code"]').removeClass("wfacp_coupon_failed_error"),o.is(".processing"))return!1;o.hasClass("wfacp_layout_shopcheckout")?o.addClass("processing").children(".wfacp_coupon_row").block(a):o.addClass("processing").block(a);var i=e(".wfacp_coupon_msg");return i.html("").show(),wfacp_send_ajax({action:"apply_coupon",type:"post",data:{coupon_code:o.find('input[name="coupon_code"]').val(),wfacp_id:e("._wfacp_post_id").val()}},function(a){if(o.hasClass("wfacp_layout_shopcheckout")?o.removeClass("processing").children(".wfacp_coupon_row").unblock():o.removeClass("processing").unblock(),e(".woocommerce-error, .woocommerce-message").remove(),a.hasOwnProperty("message")){var t=a.message;if(t.hasOwnProperty("error")){var c=t.error;if(c.length>0)for(var n=0;n<c.length>0;n++)i.prepend('<div class="woocommerce-error" role="alert">'+c[n]+"</div>")}if(t.hasOwnProperty("success")){var r=t.success;if(r.length>0)for(var s=0;s<r.length>0;s++)i.prepend('<div class="woocommerce-message" role="alert">'+r[s]+"</div>")}e(document.body).trigger("wfacp_coupon_apply",[a]),P(a)}}),!1},show_coupon_form:function(a){a.preventDefault();var t=e("form.woocommerce-form-coupon");return t.slideToggle(400,function(){t.find(".wfacp-form-control").focus()}),!1},remove_coupon:function(t){t.preventDefault();var o=e(this).parents(".woocommerce-checkout-review-order"),i=e(this).data("coupon");o.addClass("processing").block(a);var c={security:wc_checkout_params.remove_coupon_nonce,coupon:i},n=e(".wfacp_coupon_msg");n.html("").show(),e.ajax({type:"POST",url:wc_checkout_params.wc_ajax_url.toString().replace("%%endpoint%%","remove_coupon"),data:c,success:function(a){if(e(".woocommerce-error, .woocommerce-message").remove(),o.removeClass("processing").unblock(),a){n.length>0?n.html(a):e(".wfacp_layout_9_coupon_error_msg").html(a),e(document.body).trigger("update_checkout",{update_shipping_method:!1});var t=e("form.checkout_coupon").find('input[name="coupon_code"]');t.val(""),t.parent(".wfacp-input-form").removeClass("wfacp-anim-wrap")}e("form.woocommerce-form-coupon:visible").length>0&&e.scroll_to_notices(e(".wfacp_main_form")),e(document.body).trigger("wfacp_coupon_form_removed",[a])},error:function(){wc_checkout_params.debug_mode},dataType:"html"})}},m={init:function(){e(".wfacp_woocommerce_form_coupon").length>0&&(e(document.body).on("keyup focus",".wfacp_coupon_code",m.onenter),e(document.body).on("change focusout",".wfacp_coupon_code",m.remove_class),e(document.body).on("click",".wfacp_showcoupon",m.show_coupon_form),e(document.body).on("click",".wfacp-coupon-field-btn",m.apply_coupon),e(document.body).on("click",".wfacp_remove_coupon",m.remove_coupon))},onenter:function(e){s.addClass("processing")},remove_class:function(){s.removeClass("processing")},show_coupon_form:function(a){a.preventDefault();var t=e(this).parents(".wfacp_woocommerce_form_coupon");return t.find(".wfacp_coupon_field_box").slideToggle(400,function(){t.find(".wfacp_coupon_field_box").addClass("wfacp_coupon_collapsed"),t.find(".wfacp_coupon_field_box").find(":input:eq(0)").focus()}),!1},apply_coupon:function(){m.remove_class();var t=e(this).parents(".wfacp_woocommerce_form_coupon");if(t.is(".processing"))return!1;var o=t.find(".wfacp_coupon_error_msg"),i=t.find(".wfacp_coupon_code").val();return""===i?(t.removeClass("wfacp_coupon_success"),void t.addClass("wfacp_coupon_failed")):(t.removeClass("wfacp_coupon_success"),t.removeClass("wfacp_coupon_failed"),t.addClass("processing").find(".wfacp_coupon_field_box").block(a),wfacp_send_ajax({action:"apply_coupon",type:"post",data:{coupon_code:i,wfacp_id:e("._wfacp_post_id").val()}},function(a){if(e(".woocommerce-error, .woocommerce-message").remove(),t.removeClass("processing").find(".wfacp_coupon_field_box").unblock(),t.find(".wfacp-anim-wrap").removeClass("wfacp-anim-wrap"),a.hasOwnProperty("message")){var i=a.message;if(i.hasOwnProperty("error")){var c=i.error;if(c.length>0)for(var n=0;n<c.length>0;n++)o.html('<div class="woocommerce_single_error_message" role="alert">'+c[n]+"</div>");t.addClass("wfacp_coupon_failed"),setTimeout(function(e){e.html("")},4e3,o)}else t.addClass("wfacp_coupon_success"),t.find(".wfacp_coupon_code").val("")}e(document.body).trigger("wfacp_coupon_apply",[a]),P(a)}),!1)},remove_coupon:function(t){t.preventDefault(),m.remove_class();var o=e(this).parents(".wfacp_woocommerce_form_coupon"),i=e(this).parent(".wfacp_single_coupon_msg");o.addClass("processing").find(".wfacp_coupon_field_box").block(a);var c=e(this).data("coupon"),n={security:wc_checkout_params.remove_coupon_nonce,coupon:c};o.removeClass("wfacp_coupon_success"),o.removeClass("wfacp_coupon_failed"),e.ajax({type:"POST",url:wc_checkout_params.wc_ajax_url.toString().replace("%%endpoint%%","remove_coupon"),data:n,success:function(a){if(e(".woocommerce-error, .woocommerce-message").remove(),i.remove(),o.removeClass("processing").find(".wfacp_coupon_field_box").unblock(),a){var t=e("<div>"+a+"</div>");o.find(".wfacp_coupon_remove_msg").html(t.text()),e(document.body).trigger("update_checkout",{update_shipping_method:!1}),e("form.checkout_coupon").find('input[name="coupon_code"]').val(""),setTimeout(function(){o.find(".wfacp_coupon_remove_msg").html("")},4e3,o)}e(document.body).trigger("wfacp_coupon_form_removed",[a])},error:function(e){},dataType:"html"})}};function v(){if(e(".wfacp_qv-main table.variations").length>0){var a=e(".wfacp_qv-main .wfacp_qv-images").innerHeight();e(".wfacp_qv-main").animate({scrollTop:a})}e("form.variations_form.cart .variations").removeClass("wfacp_animate_shake"),setTimeout(function(){e("form.variations_form.cart .variations").addClass("wfacp_animate_shake")},500)}function g(){var a=e(".variations_form");a.on("hide_variation",function(a){e(".wfacp_qv-summary .quantity").hide(),e(".wfacp_option_btn").show(),e(this).find(".single_variation_wrap").addClass("testere");e(this).find(".wfacp_single_add_to_cart_button").text();var t="Select options";""!=wfacp_frontend.select_options_text&&(t=wfacp_frontend.select_options_text),e(this).find(".wfacp_single_add_to_cart_button").text(t),e("#wfacp_qr_model_wrap .wfacp_option_btn").click(function(){v()})}),a.on("show_variation",function(a,t){var o=t.variation_id,i=JSON.stringify(t);wfacp_storage.variation_data[o]=JSON.parse(i),F(o);e(this).find(".wfacp_single_add_to_cart_button").text();e(this).find(".wfacp_single_add_to_cart_button").text(),e(".wfacp_qv-summary .quantity").show();var c="Update";""!=wfacp_frontend.select_options_text&&(c=wfacp_frontend.update_button_text),e(this).find(".wfacp_single_add_to_cart_button").text(c),e(".wfacp_option_btn").hide()})}function y(){var a=e(".wfacp_incomplete_variation");return!(a.length>0)||(e.scroll_to_notices(a.eq(0)),setTimeout(function(){a.addClass("wfacp_animate_shake"),setTimeout(function(){a.removeClass("wfacp_animate_shake")},500)},1e3),!1)}function b(a){var t=a.data("current-step"),o=a.data("next-step"),i=e(".wfacp_page."+t),c=e(".wfacp_page."+o),n=i.data("step"),r=c.data("step");!function(a,t){e("body").hasClass(a)&&(e("body").removeClass(a),e("body").addClass(t))}(n,r);var s=!1;if(c.hasClass("wfacp_last_page")&&(s=!0),e(".wfacp_steps_sec ul").length>0){e(".wfacp_bred."+t).removeClass("wfacp_bred_active ");var p=e(".wfacp_bred."+o);p.addClass("wfacp_bred_active wfacp_bred_visited"),p.children(".wfacp_step_text_have").length>0&&I(p.children(".wfacp_step_text_have"));var d=p.find("a").data("text");""===d&&(d=o),window.location.assign("#"+d)}var l=e(".wfacp_payment");e.wfacp_step_scrolling(e(".wfacp_main_form"));var f={hide_parent:t,next_shown:o,previous_step:n,current_step:r,last_step:s};if(e(document).off("click",".place_order_back_btn a").on("click",".place_order_back_btn a",function(a){a.preventDefault(),e(".wfacp_back_page_button").last().trigger("click")}),!1===_){var u=c.find("#shipping_country");u.length>0&&(u.parents(".wfacp-form-control-wrapper").is(":visible")&&(e("#ship-to-different-address-checkbox").prop("checked",!0),_=!0),u.trigger("change"))}i.fadeOut(300,function(){s?(l.removeClass("wfacp_hide_payment_part"),l.addClass("wfacp_show_payment_part")):(l.addClass("wfacp_hide_payment_part"),l.removeClass("wfacp_show_payment_part")),c.fadeIn(600,function(){0===c.find("#shipping_method li").length&&D();var a=e(".form-row");a.hasClass("wfacp_drop_list")||a.hasClass("automatewoo-birthday-section")||a.length>0&&a.find("select").hasClass("select2-hidden-accessible")&&a.find("select").select2(),e(".country_to_state").length>0&&e(document.body).trigger("country_to_state_changed"),e("."+r).find(".wfacp_divider_billing").length>0&&e("."+r).find(".wfacp_divider_billing .form-row").each(function(){var a=e(this).attr("id");if(""!=a){var t=a.replace("_field",""),o=e("#"+t).val();""==o||null==o||e(this).hasClass("wfacp-anim-wrap")||e(this).addClass("wfacp-anim-wrap")}}),e("."+r).find(".wfacp_divider_shipping").length>0&&e("."+r).find(".wfacp_divider_shipping .form-row").each(function(){var a=e(this).attr("id");if(""!=a){var t=a.replace("_field",""),o=e("#"+t).val();""==o||null==o||e(this).hasClass("wfacp-anim-wrap")||e(this).addClass("wfacp-anim-wrap")}})})}),e(document.body).trigger("wfacp_step_switching",f)}function k(){e(document.body).trigger("country_to_state_changed"),D()}function C(a,t){e(".wfacp_qv-inner-modal").css("opacity","0").addClass(t)}function x(a,o){!function(a,o,i,c){wfacp_send_ajax({action:"quick_view_ajax",type:"post",data:a},function(n){if(1==n.status){e(".wfacp_qv-modal").html(n.html),o(i,c),wc_single_product_params.flexslider_enabled=!0,wc_single_product_params.photoswipe_enabled=!0,wc_single_product_params.zoom_enabled=!0,e(".woocommerce-product-gallery").each(function(){e(this).wc_product_gallery()}),e(".wfacp_qv-panel").find(".variations_form").wc_variation_form(),e(".wfacp_qv-panel .variations_form select").change(),a.hasOwnProperty("variation_id")&&(console.log(a.variation_id),function(a){if(!window.wfacp_storage.variation_data.hasOwnProperty(a))return!1;var t=window.wfacp_storage.variation_data[a];if(0===Object.keys(t).length)return!1;var o=t.attributes;if(0===Object.keys(o).length)return!1;for(var i in o){var c=e("#"+i);if(c.length>0){var n=o[i];c.val(n)}}}(a.variation_id)),g(),t<600&&setTimeout(function(){v()},200);var r=e('.wfacp_product_row[data-item-key="'+a.item_key+'"]');if(0===r.length)return;var s=e(".wfacp_qv-summary .product_title");if(s.length>0){var p=r.find(".wfacp_product_choosen_label").html();s.html(p)}var _=e(".wfacp_qv-summary .price");if(_.length>0){var d=r.find(".product-price").html();_.html(d)}var l=e(".wfacp_qv-summary [name=quantity]");if(l.length>0){var f=r.find(".wfacp_product_switcher_quantity");f.length>0&&l.val(f.val())}var u,w=e(".wfacp_qv-images"),h=w.find(".woocommerce-product-gallery__image");if(h.length>0?(h=w.find(".woocommerce-product-gallery__image").eq(0),u=h.find("img").data("large_image")):(h=w.find(".woocommerce-product-gallery__wrapper"),u=h.find("img").attr("src")),void 0!==u){var m=new Image;m.src=u,m.onload=function(){e(".wfacp_qv-pl-active").removeClass("wfacp_qv-pl-active")}}else e(".wfacp_qv-pl-active").removeClass("wfacp_qv-pl-active")}else e(".wfacp_qv-close").trigger("click")})}(a,C,null,"wfacp_qv-animation-fadein")}function q(a){a.preventDefault(),e.each(a.target.classList,function(a,t){"wfacp_qv-close"!==t&&"wfacp_qv-inner-modal"!==t||(e(".wfacp_qv-opac").hide(),e(".wfacp_qv-panel").removeClass("wfacp_qv-panel-active"),e(".wfacp_qv-modal").html(""))})}function F(a){if(!window.wfacp_storage.variation_data.hasOwnProperty(a))return{};var t=window.wfacp_storage.variation_data[a];if(0===Object.keys(t).length)return{};var o=t.attributes;if(0===Object.keys(o).length)return{};var i={};for(var c in o){var n=e('[data-attribute_name="'+c+'"]');n.length>0&&(i[c]=n.val(),window.wfacp_storage.variation_data[a].attributes[c]=n.val())}return i}function O(a,t){var o=e(".wfacp_qv-summary .variation_id").val();o>0&&a.attr("variation_id",o);var i=F(o),c=a.find("[name=wfacp_product_choosen]").attr("type"),n=a.attr("cart_key"),r={variation_id:o,quantity:1,attributes:i};if("hidden"===c||"checkbox"===c){var s={};s.wfacp_id=e("._wfacp_post_id").val(),s.new_item=a.data("item-key"),s.remove_item_key=n,s.quantity=1,s.variation_id=0,s.field_type=c,s=set_variation_data(s,r),wfacp_product_switch(s)}else a.find("[name=wfacp_product_choosen]").prop("checked",!0).trigger("change",r)}function P(a){if(e(document.body).trigger("wfacp_update_fragments",a),a.hasOwnProperty("cart_is_virtual")&&c!==a.cart_is_virtual){var t=e("#shipping_same_as_billing_field");t.length>0&&(1==t.is(":visible")&&1==a.cart_is_virtual?(t.hide(),e("#shipping_same_as_billing").prop("checked",!1).trigger("change")):t.show());var o={previous:c,current:a.cart_is_virtual};wfacp_frontend.hooks.doAction("wfacp_cart_behaviour_changed",o),c=a.cart_is_virtual}if(a.hasOwnProperty("cart_total")&&0===parseInt(a.cart_total)?(i=!0,e(document.body).trigger("wfacp_cart_goes_empty",{cart_total:parseInt(a.cart_total)})):i=!1,i)return i=!1,a.hasOwnProperty("fragments")&&e.each(a.fragments,function(a,t){e(a).replaceWith(t),e(a).unblock()}),void D();a.hasOwnProperty("fragments")&&a.fragments.hasOwnProperty(".cart_total")&&0===parseFloat(a.fragments[".cart_total"])&&(e(document.body).trigger("wfacp_cart_goes_empty",{cart_total:parseFloat(a.cart_total)}),D()),a.hasOwnProperty("fragments")&&e.each(a.fragments,function(a,t){e(a).replaceWith(t),e(a).unblock()}),a.hasOwnProperty("pixel_checkout")&&e(document.body).trigger("wfacp_checkout_data",{checkout:a.pixel_checkout}),e(document.body).trigger("wfacp_after_fragment_received",{response:a})}function D(a){a=void 0!==a?parseInt(a):1e3,!1===n&&(clearTimeout(d),d=setTimeout(function(){e(document.body).trigger("update_checkout")},a))}function j(a,t){"1"!==wfacp_frontend.is_customizer&&("object"==_typeof(t)&&t.hasOwnProperty("aero_do_not_state_service")||(clearTimeout(l),l=setTimeout(function(){var a=e("#shipping_postcode").val(),t=e("#shipping_country").val();0!==e("#shipping_state").length&&void 0!==a&&""!==a&&void 0!==t&&""!==t&&e.get("//api.zippopotam.us/"+t+"/"+a,function(a){if(Object.keys(a).length>0&&a.hasOwnProperty("places")&&a.places.length>0){var t=a.places[0];if(Object.keys(t).length>0&&t.hasOwnProperty("state abbreviation")){var o=t["state abbreviation"],i=e("#shipping_state option[value="+o+"]");if(i.length>0){e("#shipping_state").val(o),e("#shipping_state").parents(".form-row").addClass("wfacp-anim-wrap");var c=i.text();e("#select2-shipping_state-container").text(c),D()}}}})},100)))}function T(a,t){"1"!==wfacp_frontend.is_customizer&&("object"==_typeof(t)&&t.hasOwnProperty("aero_do_not_state_service")||(clearTimeout(f),f=setTimeout(function(){var a=e("#billing_postcode").val(),t=e("#billing_country").val();0!==e("#billing_state").length&&void 0!==a&&""!==a&&void 0!==t&&""!==t&&e.get("//api.zippopotam.us/"+t+"/"+a,function(a){if(Object.keys(a).length>0&&a.hasOwnProperty("places")&&a.places.length>0){var t=a.places[0];if(Object.keys(t).length>0&&t.hasOwnProperty("state abbreviation")){var o=t["state abbreviation"],i=e("#billing_state option[value="+o+"]");if(i.length>0){e("#billing_state").val(o),e("#billing_state").parents(".form-row").addClass("wfacp-anim-wrap");var c=i.text();e("#select2-billing_state-container").text(c),D()}}}})},100)))}function S(){var a,t,o,i,c,n,r;""!==wfacp_pixel_data.pixel_id&&(a=wfacp_pixel_data.pixel_id,"function"!=typeof fbq&&(t=window,o=document,i="script",t.fbq||(c=t.fbq=function(){c.callMethod?c.callMethod.apply(c,arguments):c.queue.push(arguments)},t._fbq||(t._fbq=c),c.push=c,c.loaded=!0,c.version="2.0",c.queue=[],(n=o.createElement(i)).async=!0,n.src="https://connect.facebook.net/en_US/fbevents.js",(r=o.getElementsByTagName(i)[0]).parentNode.insertBefore(n,r)),fbq("init",a))),"function"==typeof fbq&&"true"===wfacp_frontend.settings.wfacp_checkout_pixel_initiate_checkout_event&&fbq("track","InitiateCheckout",wfacp_storage.pixel_checkout.pixel),"1"!==wfacp_frontend.is_global&&e("form.woocommerce-checkout").on("checkout_place_order",function(){if(e(".woocommerce-NoticeGroup").remove(),!y())return!1;0===e(".woocommerce-invalid-required-field:visible").length&&wfacp_storage.hasOwnProperty("pixel_checkout")&&"function"==typeof fbq&&"true"===wfacp_frontend.settings.wfacp_checkout_pixel_initiate_checkout_event&&fbq("track","InitiateCheckout",wfacp_storage.pixel_checkout.pixel);var a=e("#billing_same_as_shipping");a.length>0&&!1===a.is(":checked")&&(e("#billing_address_1").val(e("#shipping_address_1").val()),e("#billing_city").val(e("#shipping_city").val()),e("#billing_state").val(e("#shipping_state").val()),e("#billing_country").val(e("#shipping_country").val()),e("#billing_postcode").val(e("#shipping_postcode").val()))})}function z(){"undefined"!=typeof wfacp_variation_attributes_data&&null!==wfacp_variation_attributes_data&&(wfacp_storage.variation_data=wfacp_variation_attributes_data),function(){var a=0;if(t>480){var o=e(".div_wrap_sec .wfacp-three-cols"),i=e(".div_wrap_sec .wfacp-two-cols");o.length>0?(o.each(function(){e(this).height()>a&&(a=e(this).height())}),o.height(a)):i.length>0&&(i.each(function(){e(this).height()>a&&(a=e(this).height())}),i.height(a))}}(),function(){if(t>991){var a=e(".wfacp_cls_layout_1 .wfacp_header .wfacp-container.wfacp-inner-header");if(a.length>0){var o=a.height()-e(".wfacp-header").height();e(".wfacp-panel-wrapper").css("margin-top",o)}}}(),e("body").addClass("wfacp_page_loaded");var a=!1,o=!1,i=e("#billing_country"),c=e("#billing_country_field");i.length>0&&""!==i.val()&&c.addClass("wfacp-anim-wrap");var n=e("#billing_state");n.length>0&&(n.parents(".wfacp-form-control-wrapper").removeClass("woocommerce-invalid-required-field"),""!==n.val()&&n.parents(".wfacp-form-control-wrapper").addClass("wfacp-anim-wrap"),n.is("input")&&(i.trigger("change",{aero_do_not_state_service:"yes"}),a=!0),N(e("#billing_state_field"),e("#billing_state").val()));var r=e("#shipping_country"),s=e("#shipping_country_field");r.length>0&&(s.removeClass("woocommerce-invalid-required-field"),s.is(":visible")&&e("#ship-to-different-address-checkbox").prop("checked",!0),""!==r.val()&&s.addClass("wfacp-anim-wrap"));var p=e("#shipping_state");p.length>0&&(p.parents(".wfacp-form-control-wrapper").removeClass("woocommerce-invalid-required-field"),p.parents(".wfacp-form-control-wrapper").is(":visible")&&(p.parents(".wfacp-form-control-wrapper").removeClass("woocommerce-invalid-required-field"),""!==p.val()&&p.parents(".wfacp-form-control-wrapper").addClass("wfacp-anim-wrap"),p.is("input")&&(r.trigger("change",{aero_do_not_state_service:"yes"}),a=!0,o=!0)),setTimeout(function(){N(e("#shipping_state_field"),e("#shipping_state").val())},600));var _,d,l=e("#billing_shipping_index").val();if("billing"===l?e(".wfacp_billing_fields").removeClass("validate-required"):"shipping"===l&&e(".wfacp_shipping_fields").removeClass("validate-required"),h.init(),m.init(),""!==wfacp_pixel_data.pixel_id&&setTimeout(function(){if("function"==typeof fbq&&0!==Object.keys(wfacp_pixel_data.pixel_add_to_cart).length&&"true"===wfacp_frontend.settings.wfacp_checkout_pixel_add_to_cart_event){var e=wfacp_pixel_data.pixel_add_to_cart;for(var a in e)fbq("track","AddToCart",e[a])}},1e3),_=e(".wfacp-form-control"),d=["account_password","password","username","user_email","wfacp_coupon_code_field","coupon_code"],d=wfacp_frontend.hooks.applyFilters("wfacp_skip_keys_before_localize",d),_.length>0&&wfacp_frontend.hasOwnProperty("autopopulate")&&"yes"===wfacp_frontend.autopopulate&&e(document.body).on("focusout",".wfacp-form-control",function(){var a={};if(e(document.body).find(".wfacp-form-control").each(function(){var t=e(this).attr("id"),o=e(this).val();void 0!==_typeof(t)&&-1===e.inArray(t,d)&&""!==o&&(a[t]=e(this).val())}),"undefined"!=typeof Storage)try{window.localStorage.setItem("wfacp_form_values",JSON.stringify(a))}catch(e){}}),!1===a&&D(),"undefined"!=typeof wc_address_i18n_params&&!1===o&&r.length>0){var f=r.val(),u=wc_address_i18n_params.locale.replace(/&quot;/g,'"');e.parseJSON(u).hasOwnProperty(f)||r.trigger("change")}}function A(){var a=e(".wfacp_select2_country_state");a.length>0&&a.removeClass("wfacp_select2_country_state")}function N(e,a){void 0!==a&&""!=a&&null!=a||e.removeClass("wfacp-anim-wrap")}function E(){setTimeout(function(){e(".wfacp_product_row").each(function(){var a=e(this);a.hasClass("wfacp-selected-product")||a.find(".wfacp_best_value_container .wfacp_best_value").length>0&&a.find(".wfacp_best_value").addClass("shake_top")})},300)}function I(e){e.parent().prev().hasClass("wfacp_active_prev")||e.parent().prev().addClass("wfacp_active_prev"),e.parent().next().hasClass("wfacp_active_prev")&&e.parent().next().removeClass("wfacp_active_prev")}window.wfacp_haschanges="no",window.wfacp_storage={add_to_cart:{},pixel_checkout:wfacp_pixel_data.pixel_checkout,variation_data:{}},window.wfacp_send_ajax=function(a,t){if("1"!==wfacp_frontend.is_customizer){var o=wfacp_frontend.admin_ajax;a.hasOwnProperty("url")&&(o=a.url),a.action="wfacp_"+a.action,wfacp_frontend.hasOwnProperty("wc_endpoints")&&wfacp_frontend.wc_endpoints.hasOwnProperty(a.action)&&(o=wfacp_frontend.wc_endpoints[a.action]),e("#product_switcher_need_refresh").val(1),e(document.body).trigger(a.action,a),e.ajax({url:o,type:a.type,data:{action:a.action,wfacp_nonce:wfacp_frontend.wfacp_nonce,data:a.data,post_data:e("#wfacp_checkout_form").serialize()},success:function(o){if(o.hasOwnProperty("cart_contains_subscription")&&1==o.cart_contains_subscription){var i=e("#createaccount");i.length>0&&(i.is(":checked")||i.trigger("click")),e("#wfacp_cart_contains_subscription").val(1)}else e("#wfacp_cart_contains_subscription").val(0);"function"==typeof t&&(o.action=a.action,t(o)),"object"==_typeof(o)&&o.hasOwnProperty("nonce")&&(wfacp_frontend.wfacp_nonce=o.nonce)}})}else console.log("stop execution of ajax in customizer for aero checkout")},window.wfacp_submit_error=function(a){var t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],o=e(".checkout.woocommerce-checkout");e(".woocommerce-NoticeGroup-checkout, .woocommerce-error, .woocommerce-message").remove(),o.prepend('<div class="woocommerce-NoticeGroup woocommerce-NoticeGroup-checkout">'+a+"</div>"),o.removeClass("processing").unblock(),!0===t&&o.find(".input-text, select, input:checkbox").trigger("validate").blur(),e.scroll_to_notices(e(".woocommerce-NoticeGroup.woocommerce-NoticeGroup-checkout"))},window.wfacp_show_error=function(e,a){if(0!==e.length){if(e.find(".wfacp_product_switcher_error").remove(),e.append('<div class="wfacp_product_switcher_error"style="clear:both">'+a.error+"</div>"),a.hasOwnProperty("qty")){var t=e.find(".wfacp_product_switcher_quantity").data("value"),o=a.qty;parseInt(t)>0&&(o=t),e.find(".wfacp_product_switcher_quantity").val(o)}setTimeout(function(e){e.find(".wfacp_product_switcher_error").remove()},1e4,e)}},window.set_variation_data=function(e,a){return void 0!==a&&(a.hasOwnProperty("variation_id")&&(e.variation_id=a.variation_id),a.hasOwnProperty("quantity")&&(e.quantity=a.quantity),a.hasOwnProperty("attributes")&&(e.attributes=a.attributes)),e},window.populate_fields_value=function(){var a=e(".wfacp-form-control");if("undefined"!=typeof Storage&&0!==a.length&&wfacp_frontend.hasOwnProperty("autopopulate")&&"yes"===wfacp_frontend.autopopulate){var t=window.localStorage.getItem("wfacp_form_values");if(null!=t&&"object"===_typeof(t=JSON.parse(t))&&0!==Object.keys(t).length)for(var o in t){var i=e("#"+o);t.hasOwnProperty(o)&&""!==t[o]?(i.val(t[o]),i.parents(".form-row").hasClass("wfacp-anim-wrap")||i.parents(".form-row").addClass("wfacp-anim-wrap")):i.parents(".form-row").removeClass("wfacp-anim-wrap")}}},window.wfacp_product_switch=function(t,o){var i=e(".wfacp-product-switch-panel");i.block(a),t.you_save=i.data("you-save-text"),t.is_hide=i.data("is-hide"),wfacp_send_ajax({action:"switch_product_addon",type:"post",data:t},function(a){"function"==typeof o&&o(a),!1!==a.status?(!0===a.status&&setTimeout(function(){setTimeout(function(){e(".wfacp_product_row[data-item-key="+a.item_key+"]")},300),e(document.body).trigger("wfacp_product_added",{item:a.cart_item,item_key:a.item_key})},300),e("#product_switcher_need_refresh").val(0),P(a),D()):i.unblock()})},window.validate_fields=function(a){0!==a.length&&a.each(function(a){var t=e(this),o=t.closest(".form-row"),i=!0,c=o.is(".validate-required"),n=o.is(".validate-email"),r=t.val();c&&("checkbox"!==t.attr("type")||t.is(":checked")?t.parents(".wfacp_custom_field_radio_wrap").length>0?0==t.parents(".wfacp_custom_field_radio_wrap").find("input:checked").length?(i=!1,o.removeClass("woocommerce-validated").addClass("woocommerce-invalid woocommerce-invalid-required-field")):i=!0:null!=r&&""!==r.trim()||(o.removeClass("woocommerce-validated").addClass("woocommerce-invalid woocommerce-invalid-required-field"),i=!1):(o.removeClass("woocommerce-validated").addClass("woocommerce-invalid woocommerce-invalid-required-field"),i=!1)),(n=wfacp_frontend.hooks.applyFilters("wfacp_field_validate_email",n,t,o))&&t.val()&&(new RegExp(/^((([a-z]|\d|[!#\$%&'\*\+\-\/=\?\^_`{\|}~]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])+(\.([a-z]|\d|[!#\$%&'\*\+\-\/=\?\^_`{\|}~]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])+)*)|((\x22)((((\x20|\x09)*(\x0d\x0a))?(\x20|\x09)+)?(([\x01-\x08\x0b\x0c\x0e-\x1f\x7f]|\x21|[\x23-\x5b]|[\x5d-\x7e]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(\\([\x01-\x09\x0b\x0c\x0d-\x7f]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF]))))*(((\x20|\x09)*(\x0d\x0a))?(\x20|\x09)+)?(\x22)))@((([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])*([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])))\.)+(([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])*([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])))\.?$/i).test(t.val())||(o.removeClass("woocommerce-validated").addClass("woocommerce-invalid woocommerce-invalid-email"),i=!1)),(i=wfacp_frontend.hooks.applyFilters("wfacp_field_validated",i,t,o))&&o.removeClass("woocommerce-invalid woocommerce-invalid-required-field woocommerce-invalid-email").addClass("woocommerce-validated")})},e(document).keydown(function(e){9===e.which&&(o=!0)}),e(document).on("focus",".select2",function(){o&&(o=!1,e(this).siblings("select").select2("open"))}),e(document).keyup(function(a){27===a.keyCode&&e(".wfacp_qv-close").trigger("click")}),e(document.body).on("click",".wfacp_next_page_button",function(){var a=e(this),t=e(this).data("current-step"),o=e(".wfacp_page."+t);if(!(o.find("#product_switching_field").length>0)||y()){if(A(),w=!0,e(".woocommerce-error").remove(),validate_fields(o.find(".wfacp-form-control:visible")),o.find(".woocommerce-invalid:visible").length>0)return e(".wfacp_payment").removeClass("wfacp_show_payment_part"),void e(document.body).trigger("checkout_error");b(a),setTimeout(function(){w=!1},450),setTimeout(function(){w=!1},450)}}),e(document.body).on("click",".wfacp_back_page_button",function(){b(e(this))}),e(document.body).on("#billing_email","change",function(){var a=e(this).val();(function(e){return/^(([^<>()\[\]\\.,;:\s@"]+(\.[^<>()\[\]\\.,;:\s@"]+)*)|(".+"))@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\])|(([a-zA-Z\-0-9]+\.)+[a-zA-Z]{2,}))$/.test(String(e).toLowerCase())})(a)&&""!==a&&(clearTimeout(u),u=setTimeout(function(){wfacp_send_ajax({action:"check_email",type:"post",data:{email_id:a}},function(e){!0===e.status&&wfacp_submit_error(e.msg,!1)})},300))}),e(document).ready(function(){e(".wfacp_custom_field_radio_wrap input[type=radio]").click(function(){e(this).is(":checked")?e(this).parents(".wfacp_custom_field_radio_wrap").removeClass("woocommerce-invalid woocommerce-invalid-required-field").addClass("woocommerce-validated"):e(this).parents(".wfacp_custom_field_radio_wrap").removeClass("woocommerce-validated").addClass("woocommerce-invalid woocommerce-invalid-required-field")});var t,o=e(".wfacp_drop_list"),i=e(".wfacp-form-control");e(document.body).trigger("wfacp_front_ready",[s]),o.length>0&&o.find("select").hasClass("select2-hidden-accessible")&&"object"===_typeof(t=o)&&(t.removeClass("wfacp_drop_list"),t.addClass("wfacp_add_select_2")),e(document.body).on("click",".wfacp_product_choosen_label_wrap .wfacp_product_choosen_label,.wfacp_product_switcher_col.wfacp_product_switcher_col_2 .product_name > span,.wfacp_product_row .product-price .wfacp_product_price_sec, #product_switching_field.wfacp_not_force_all.wfacp_setting_not_image_hide .wfacp_product_switcher_col_1 .product-image",function(){e(this).parents(".wfacp_product_row").hasClass("wfacp-selected-product")||e(this).parents(".wfacp_product_row").find("input[name='wfacp_product_choosen']").trigger("click")}),e(".wfacp_mb_mini_cart_wrap .wfacp_mb_cart_accordian").click(function(a){a.preventDefault();var t=e(".wfacp_mb_mini_cart_wrap .wfacp_mb_cart_accordian"),o=e(t).siblings(".wfacp_mb_mini_cart_sec_accordion_content");o.hasClass("wfacp_display_none")?(o.slideDown("slow"),o.removeClass("wfacp_display_none"),e(t).find(".wfacp_show_icon_wrap img").addClass("wfacp_up_arrow"),e(t).find(".wfacp_show_icon_wrap a span").text(t.attr("attr-expend"))):(o.slideUp("slow"),o.addClass("wfacp_display_none"),e(t).find(".wfacp_show_icon_wrap img").removeClass("wfacp_up_arrow"),e(t).find(".wfacp_show_icon_wrap a span").text(t.attr("attr-collaps")))}),i.length>0&&(e(document).on("focus",".wfacp-form-control",function(){e(this).parents(".wfacp-form-control-wrapper").addClass("wfacp-anim-wrap")}),e(document).on("change",".wfacp-form-control",function(){""!==e(this).val()&&(e(this).parent().siblings(".wfacp_input_error_msg").hide(),e(this).parents(".wfacp-form-control-wrapper").addClass("wfacp-anim-wrap"))}),e(document).on("focusout",".wfacp-form-control",function(){""===e(this).val()&&e(this).parents(".wfacp-form-control-wrapper").removeClass("wfacp-anim-wrap")})),s.on("input validate change",".input-text, select, input:checkbox",function(){r.html(""),e(".wfacp_input_error_msg").length>0&&e(".wfacp_error_message").hide();var a=e("#billing_state"),t=e("#shipping_state");a.length>0&&a.addClass("wfacp-form-control"),t.length>0&&t.addClass("wfacp-form-control")}),e(document).on("change",".wfacp_product_choosen",function(t,o){var i=e(".wfacp-product-switch-panel"),c=e(this),n=e(this).is(":checked"),r=e(this).attr("type"),s=e(this).parents(".wfacp_product_row");"radio"===r&&e(".wfacp-product-switch-panel .wfacp_product_row").removeClass("wfacp-selected-product");var p="addon_product",_={};n||(p="remove_addon_product"),_.type=r,_.wfacp_id=e("._wfacp_post_id").val();s.find(".wfacp_product_switcher_quantity");void 0!==o&&("add"===o.action&&(p="addon_product",_.quantity=o.qty),"remove"===o.action&&(p="remove_addon_product",o.hasOwnProperty("old_qty")&&(_.old_qty=o.old_qty))),i.block(a);var d=e(this).data("item-key"),l=e(this).attr("cart_key");_.item_key=d,void 0!==l&&""!==l&&(_.item_key=l),_=set_variation_data(_,o),wfacp_send_ajax({action:p,type:"post",data:_},function(a){if(a.hasOwnProperty("error"))return"addon_product"===p?c.prop("checked",!1):c.prop("checked",!0),wfacp_show_error(s,a),void i.unblock();1==a.status&&(e("#product_switcher_need_refresh").val(0),"addon_product"===p&&e(document.body).trigger("wfacp_product_added",{item:a.cart_item,item_key:a.item_key}),P(a),D(),"checkbox"===r&&E())})}),e(document).on("change",".wfacp_product_switcher_quantity",function(t,o){if(!e(this).hasClass("wfacp_product_global_quantity_bump")){if(e(this).is(":disabled"))return!1;var i=e(this).parents(".wfacp_product_row"),c=i.find(".wfacp_product_choosen");0===c.length&&(c=i.find(".wfacp_product_switch"));var n=c.data("item-key"),r=c.attr("cart_key"),s=e("._wfacp_post_id").val(),p=e(this).val();if(""!==r)if(0!==parseInt(p)&&""!==p){var _=e(".wfacp-product-switch-panel");_.block(a);var d={action:"update_product_qty",type:"post",data:{item_key:n,cart_key:r,qty:p,wfacp_id:s,is_hide:_.data("is-hide")}};wfacp_send_ajax(d,function(a){if(a.hasOwnProperty("error"))return a.hasOwnProperty("item_key")?i=e('.wfacp_product_row[data-item-key="'+a.item_key+'"]'):a.hasOwnProperty("cart_key")&&(i=e('.wfacp_product_row[cart_key="'+a.cart_key+'"]')),wfacp_show_error(i,a),void _.unblock();e("#product_switcher_need_refresh").val(0),P(a),D()})}else{var l=e(this).data("value");if(wfacp_frontend.switcher_settings.hasOwnProperty("enable_delete_item")&&"true"===wfacp_frontend.switcher_settings.enable_delete_item)c.trigger("change",{action:"remove",qty:0,old_qty:l});else{var f=e(this).data("value");e(this).val(f)}}else{if(0===parseInt(p)||""===p)return;c.trigger("change",{action:"add",qty:p})}}}),e(document).on("change",".wfacp_product_switch",function(a,t){if(!e(this).is(":checked"))return!1;var o=e(this),i={},c=o.data("item-key"),n=e(".wfacp-selected-product");n.removeClass("wfacp-selected-product");var r=o.parents(".wfacp_product_row");r.addClass("wfacp-selected-product"),i.wfacp_id=e("._wfacp_post_id").val(),i.new_item=c,i.remove_item_key=n.attr("cart_key"),i.quantity=1,i.variation_id=0,i=set_variation_data(i,t),"object"==_typeof(t)&&(t.hasOwnProperty("old_qty")&&(i.old_qty=t.old_qty),t.hasOwnProperty("variation_id")&&t.hasOwnProperty("quantity")?i.quantity=t.quantity:i.quantity=t.qty),wfacp_product_switch(i,function(e){!1===e.status?(wfacp_show_error(r,e),r.removeClass("wfacp-selected-product"),n.addClass("wfacp-selected-product"),n.find(".wfacp_product_switch").prop("checked",!0)):E()})}),e(document).on("change",".wfacp_product_global_quantity_bump",function(){var t=e(this).val(),o=e(this).parents(".cart_item"),i=o.attr("cart_key"),c=e(this).data("value");if((void 0==t||""==t||0==t)&&!(wfacp_frontend.switcher_settings.hasOwnProperty("enable_delete_item")&&"true"===wfacp_frontend.switcher_settings.enable_delete_item))return void e(this).val(c);var n=e(".wfacp-product-switch-panel");n.block(a),wfacp_send_ajax({action:"update_cart_item_quantity",type:"post",data:{cart_key:i,quantity:t,old_qty:c,wfacp_id:e("._wfacp_post_id").val()}},function(a){if(n.unblock(),a.hasOwnProperty("error")&&a.hasOwnProperty("cart_key"))return o=e('.wfacp_product_row[cart_key="'+a.cart_key+'"]'),void wfacp_show_error(o,a);P(a)})}),e(document).on("change","#shipping_same_as_billing",function(){var a=wfacp_frontend.wc_customizer_validation_status;e(this).is(":checked")?(e(".ship_to_different_address").val(1).prop("checked",!0),e(".wfacp_shipping_fields").each(function(){e(this).removeClass("wfacp_shipping_field_hide"),e(this).addClass("wfacp_shipping_field_show");var t=e(this).attr("id");e(this).addClass("validate-required"),e(this).hasClass("validate-required")&&void 0!==a[t]&&"wfacp_required_optional"===a[t]&&e(this).removeClass("validate-required")})):(e(".ship_to_different_address").prop("checked",!1),e(".wfacp_shipping_fields").each(function(){e(this).addClass("wfacp_shipping_field_hide"),e(this).removeClass("wfacp_shipping_field_show"),e(this).removeClass("validate-required")})),k()}),e(document).on("change","#billing_same_as_shipping",function(){var a=wfacp_frontend.wc_customizer_validation_status;if(e(this).is(":checked")){e("#wfacp_billing_same_as_shipping").val(1),e(".wfacp_billing_fields").each(function(){e(this).removeClass("wfacp_billing_field_hide"),e(this).addClass("wfacp_billing_field_show")}),e("#billing_address_1").val(""),e("#billing_city").val(""),e("#billing_postcode").val(""),e("#billing_address_1_field").removeClass("wfacp-anim-wrap"),e("#billing_city_field").removeClass("wfacp-anim-wrap"),e("#billing_postcode_field").removeClass("wfacp-anim-wrap");var t=e(".wfacp_billing_field_show");t.addClass("validate-required"),t.each(function(){var t=e(this),o=t.attr("id");t.hasClass("validate-required")&&void 0!==a[o]&&"wfacp_required_optional"===a[o]&&t.removeClass("validate-required")})}else{e("#wfacp_billing_same_as_shipping").val(0),e(".wfacp_billing_fields").each(function(){e(this).addClass("wfacp_billing_field_hide"),e(this).removeClass("wfacp_shipping_field_show")}),e("#billing_address_1").val(e("#shipping_address_1").val()),e("#billing_city").val(e("#shipping_city").val()),e("#billing_state").val(e("#shipping_state").val()),e("#billing_country").val(e("#shipping_country").val()).trigger("change"),e("#billing_postcode").val(e("#shipping_postcode").val()),e(".wfacp_billing_field_show").removeClass("woocommerce-invalid woocommerce-invalid-required-field validate-required")}k()}),wfacp_frontend.hasOwnProperty("autopopulatestate")&&"yes"===wfacp_frontend.autopopulatestate&&(e(document).on("change","#shipping_postcode",j),e(document).on("change","#shipping_country",j),e(document).on("change","#billing_country",T),e(document).on("change","#billing_postcode",T)),e(document.body).on("checkout_error",function(){if(!0===wfacp_frontend.hooks.applyFilters("disable_error_messages",!1))return!0;if(!(e(".wfacp_amazon_checkout").length>0||e(".wfacp_paypal_express").length>0))if(e("#account_password_field").removeClass("wfacp-create-account-label"),e(".wfacp_payment.wfacp_show_payment_part").length>0||1===e(".wfacp_page").length){var a=e(".wfacp_custom_field_radio_wrap.validate-required");a.length>0&&a.each(function(){0==e(this).find("input[type=radio]:checked").length&&e(this).removeClass("woocommerce-validated").addClass("woocommerce-invalid woocommerce-invalid-required-field")})}else{e(".woocommerce-NoticeGroup-checkout, .woocommerce-error, .woocommerce-message").remove(),e(".wfacp_input_error_msg").remove();var t=e(".woocommerce-invalid:visible"),o=[];0!==t.length&&(t.each(function(){var a=e(this),t=e(this).find("input"),i=a.children("label");0===i.length&&(i=a.find("label").eq(0));var c=i.clone().children().remove().end().text();""===(c=c.trim())&&(i.find(".required").remove(),c=i.text().trim());var n="",r="<strong>"+c.trim()+"</strong> ";n=e(this).hasClass("woocommerce-invalid-email")?p.invalid_email_field.replace("%s",r):p.error_required_msg.replace("%s",r),n=wfacp_frontend.hooks.applyFilters("wfacp_field_error_message",n,a,t),o.push("<li>"+n+"</li>")}),o.length>0&&wfacp_submit_error('<ul class="woocommerce-error" role="alert">'+o.join(" ")+"</ul>",!1))}}),e("#createaccount").on("change",function(){e(this).is(":checked")?e("#account_password_field").addClass("wfacp-create-account-label"):e("#account_password_field").removeClass("wfacp-create-account-label")}),e("#shipping_same_as_billing").trigger("change"),e(".wfacp_steps_wrap a").off("click").on("click",function(a){if(!e(this).parent().hasClass("df_cart_link")&&(a.preventDefault(),!e(this).parent().hasClass("ppec_express_checkout_m"))){for(var t=e(this).parent().attr("step"),o=["single_step","two_step","third_step"],i=0;i<o.length;i++)t==o[i]?e("body").hasClass(t)||e("body").addClass(t):e("body").removeClass(o[i]);if(!e(".wfacp_page:visible").hasClass(t)&&e(this).parent().hasClass("wfacp_bred_visited")){e(".woocommerce-error").remove(),e(".wfacp_steps_sec ul li").removeClass("wfacp_bred_active"),e(this).parent().addClass("wfacp_bred_active"),I(e(this)),e(".wfacp_page:visible").fadeOut(300,function(){e(".wfacp_page."+t).fadeIn(600),k()}),e(".wfacp_page."+t).hasClass("wfacp_last_page")&&e(".wfacp_payment").removeClass("wfacp_hide_payment_part");var c=e(this).data("text");""===c&&(c=t),setTimeout(function(){window.location.assign("#"+c)},700)}}}),e(".wfacp_qv-panel").on("click",".wfacp_qv-close",q),e(document.body).on("click",".wfacp_qv-inner-modal",q),e(document.body).on("click",".wfacp_qv-button",function(a){a.preventDefault();var t=e(this).parents(".wfacp_product_row");e(".wfacp_qv-opac").show();var o=e(".wfacp_qv-panel");o.addClass("wfacp_qv-panel-active"),o.find(".wfacp_qv-opl").addClass("wfacp_qv-pl-active");var i=e(this).attr("qv-id"),c={};t.length>0&&(c.item_key=t.attr("data-item-key"),c.cart_key=t.attr("cart_key")),c.wfacp_id=e("._wfacp_post_id").val(),c.product_id=i;var n=e(this).attr("qv-var-id");void 0!==n&&(c.variation_id=n),x(c)}),e(document).on("click",".wfacp_single_add_to_cart_button",function(){var a=e(this).siblings(".quantity").children("[name=quantity]").val(),t=e(".wfacp_qv-inner-modal"),o=t.data("item-key"),i=t.data("cart-key"),c=!1;if(e(".wfacp_qv-summary .variations_form").length>0&&(c=!0),void 0!==i&&""!==i){var n=e('.wfacp_product_row[cart_key="'+i+'"]');if(n.length>0){var r=n.find(".wfacp_product_switcher_quantity");r.length>0&&r.val(a),!0===c?O(n):r.trigger("change"),e(".wfacp_qv-close").trigger("click")}}else if(void 0!==o&&""!==o){var s=e('.wfacp_product_row[data-item-key="'+o+'"]');if(s.length>0){var p=s.find(".wfacp_product_switcher_quantity");p.length>0&&p.val(a),!0===c?O(s):s.find("[name=wfacp_product_choosen]").prop("checked",!0).trigger("change"),e(".wfacp_qv-close").trigger("click")}}}),e("#billing_country, #shipping_country, .country_to_state,#shipping_state,#billing_state").on("change",function(a,t){setTimeout(function(){var a=e("#shipping_state"),t=a.val(),o=a.parents(".form-row");a.hasClass("input-text")&&a.addClass("wfacp-form-control");var i=e("#billing_state"),c=i.val(),n=i.parents(".form-row");N(o,t),N(n,c),i.hasClass("input-text")&&i.addClass("wfacp-form-control")},700)}),e(document.body).on("click",".wfacp_edit_address",function(a){a.preventDefault(),"billing"===e(this).data("type")&&e(".wfacp_express_billing_address").slideToggle(),"shipping"===e(this).data("type")&&e(".wfacp_express_shipping_address").slideToggle()}),e(document.body).on("click","#place_order",function(){A(),e(".woocommerce-error").remove()}),e("#billing_same_as_shipping").length>0&&(e(document).on("change","#shipping_country",function(){e("#billing_same_as_shipping").is(":checked")||e("#billing_country").val(e(this).val()).trigger("change")}),e(document).on("change","#shipping_state",function(){e("#billing_same_as_shipping").is(":checked")||e("#billing_state").val(e(this).val()).trigger("change")})),e(document.body).on("click",".wfacp_remove_item_from_cart",function(t){t.preventDefault();e(this);var o=e(this).parents(".cart_item"),i=(e(this).parent(".wfacp_delete_item"),e(this).data("cart_key")),c=e(this).data("item_key"),n=e(".wfacp-product-switch-panel");n.block(a),wfacp_send_ajax({action:"remove_cart_item",type:"post",data:{cart_key:i,item_key:c,wfacp_id:e("._wfacp_post_id").val()}},function(a){if(n.unblock(),a.hasOwnProperty("error")&&a.hasOwnProperty("cart_key"))return o=e('.wfacp_product_row[cart_key="'+a.cart_key+'"]'),void wfacp_show_error(o,a);e("#product_switcher_need_refresh").val(0),P(a),D()})}),e(document.body).on("click",".wfacp_restore_cart_item",function(t){t.preventDefault();var o=e(this).data("cart_key");e(".wfacp-product-switch-panel").block(a),wfacp_send_ajax({action:"undo_cart_item",type:"post",data:{cart_key:o,wfacp_id:e("._wfacp_post_id").val()}},function(a){e("#product_switcher_need_refresh").val(1),P(a),D()})}),S(),function(){var a=e(".wfacp-form-control");if("undefined"!=typeof Storage&&a.length>0&&wfacp_frontend.hasOwnProperty("autopopulate")&&"yes"===wfacp_frontend.autopopulate)return populate_fields_value(),"";setTimeout(function(a){a.each(function(){var a=e(this);!a.hasClass("address-field")||a.hasClass("wfacp-anim-wrap")?""!==a.val()?a.parents(".wfacp-form-control-wrapper").hasClass("wfacp-anim-wrap")||a.parents(".wfacp-form-control-wrapper").addClass("wfacp-anim-wrap"):a.parents(".wfacp-form-control-wrapper").removeClass("wfacp-anim-wrap"):a.addClass("wfacp-anim-wrap")})},1e3,a)}(),e(document.body).on("click","span.wfacp_attr_value_not_available",function(){e(this).parents(".wfacp_product_sec").find("a.wfacp_qv-button").trigger("click")})}),e(window).on("load",function(){z()}),e(document.body).on("wfacp_init",function(){z()}),e(document).on("change",".shipping_method",function(){e(".wfacp_shipping_options").block(a)}),e(document.body).on("update_checkout",function(){var t;(t=e(".wfacp_order_total_field")).length>0&&t.block(a);var o=e(".wfacp_shipping_options");o.length>0&&o.block(a);var i=e(".foo_event_wrap");i.length>0&&i.block(a),n=!0,0}),e(document.body).on("updated_checkout",function(a,t){e("#product_switcher_need_refresh").val(1),void 0!==t&&(n=!1);var o=e("#payment ul.wc_payment_methods");e("#payment ul.wc_payment_methods > li").length>1?o.removeClass("wfacp_method_length_count_one"):o.addClass("wfacp_method_length_count_one"),setTimeout(function(){0!==e(".foo_event_wrap").length&&populate_fields_value()},600)}),e(document.body).on("wfacp_product_added",function(e,a){if("object"===_typeof(a)&&Object.keys(a).length>0&&a.hasOwnProperty("item_key")&&a.hasOwnProperty("item")&&a.item.hasOwnProperty(a.item_key)){var t=a.item_key;if(wfacp_storage.add_to_cart.hasOwnProperty(t))return;"function"==typeof fbq&&a.item[t].hasOwnProperty("pixel")&&fbq("track","AddToCart",a.item[t].pixel)}}),e(document.body).on("wfacp_checkout_data",function(e,a){if("object"===_typeof(a)&&a.hasOwnProperty("checkout")&&a.hasOwnProperty("checkout")){if(void 0===a.checkout)return;if(!a.checkout.hasOwnProperty("pixel"))return;wfacp_storage.pixel_checkout=a.checkout.pixel}}),e(window).bind("popstate",function(){if(!0!==w){var a=location.hash;if("#"!==a){var t="",o=e(".wfacp_step_text_have");if(0!==o.length){var i=!1,c=null;if(""===a?i=!0:(t=a.replace("#",""),0===(c=e('.wfacp_step_text_have[data-text="'+t+'"]')).length&&(i=!0)),!0===i&&(c=o.eq(0)),null!=c){var n=c.parent(),r=n.attr("step"),s=e(".wfacp_page:visible");if(!s.hasClass(r)&&n.hasClass("wfacp_bred_visited")){if(e(".woocommerce-error").remove(),validate_fields(s.find(".wfacp-form-control:visible")),s.find(".woocommerce-invalid:visible").length>0)return void e(".wfacp_payment").removeClass("wfacp_show_payment_part");e(".wfacp_page").hide(),e(".wfacp_steps_sec ul li").removeClass("wfacp_bred_active"),n.addClass("wfacp_bred_active");var p=e(".wfacp_page."+r);e(p).fadeIn(600),p.hasClass("wfacp_last_page")&&e(".wfacp_payment").removeClass("wfacp_hide_payment_part"),k()}}}}}}),e(document.body).on("click",".wfacp_preview_step_change",function(){b(e(this))}),e(document.body).on("wfacp_undo_cart_item",function(a,t){e("#product_switcher_need_refresh").val(0)}),function(){var a=e(".mailchimp-newsletter");a.length>0&&a.addClass("wfacp-form-control-wrapper wfacp-col-full wfacp_checkbox_field");var t=e(".mc4wp-checkbox");t.length>0&&t.addClass("wfacp-form-control-wrapper wfacp-col-full wfacp_checkbox_field");var o=e("#ss_wc_mailchimp_opt_in");o.length>0&&o.parents(".woocommerce-mailchimp-opt-in").addClass("wfacp-form-control-wrapper wfacp-col-full wfacp_checkbox_field"),e(".address-field input,.address-field select").on("input",function(){e(this).parents(".form-row").hasClass("wfacp-anim-wrap")||e(this).parents(".form-row").addClass("wfacp-anim-wrap")}),e(document.body).on("wfacp_sustain_multi_checkout_page_run",function(){"undefined"==typeof b4_checkout_updating?window.b4_checkout_updating=!0:b4_checkout_updating=!0}),e(document).on("wfacp_sustain_multi_checkout_page_finish",function(){"undefined"!=typeof b4_checkout_updating&&D()});var i=!1;e(document.body).on("wfacp_checkout_data",function(){var a=e("#payment_method_woo-mercado-pago-custom");a.length>0&&"woo-mercado-pago-custom"===a.val()&&(i=!0,D())}),s.on("click",'input[name="payment_method"]',function(){"woo-mercado-pago-custom"===e(this).val()&&"object"==("undefined"==typeof MPv1?"undefined":_typeof(MPv1))&&1==i&&(MPv1.guessingPaymentMethod({event:"keyup"}),i=!1)}),e(document.body).on("wfacp_coupon_apply",function(){var a=e("#payment_method_woo-mercado-pago-custom");a.length>0&&"woo-mercado-pago-custom"===a.val()&&(i=!0,D())}),e(document.body).on("wfacp_coupon_form_removed",function(){var a=e("#payment_method_woo-mercado-pago-custom");a.length>0&&"woo-mercado-pago-custom"===a.val()&&(i=!0,D())});var c="";e(document.body).on("change",".iw_tcs_variable",function(){var a=e(this).find("option:selected").text();c=a.trim()}),e(document.body).on("wfacp_after_fragment_received",function(a,t){!function(){if(""!==c){var a=e(".iw_tcs_variable");a.children("option").each(function(){var t=e(this).text();if((t=t.trim())==c){var o=e(this).attr("value");a.val(o),a.trigger("change")}})}}()})}(),function(){if(0!==s.length){e(document.body).trigger("wfacp_sustain_multi_checkout_page_run",[s]);var t=wfacp_frontend.id,o=wfacp_frontend.id;try{if(!("sessionStorage"in window&&null!==window.sessionStorage))return;window.localStorage.setItem("wfacp_checkout_page_id",wfacp_frontend.id),window.addEventListener("storage",function(e){"wfacp_checkout_page_id"===e.key&&(o=e.newValue,window.wfacp_haschanges="yes")}),window.addEventListener("focus",function(i){t!==o&&o>0&&"yes"===window.wfacp_haschanges&&function(t){var o={products:{},coupon:"",wfacp_id:t},i=e(".wfacp_product_row");i.length>0?i.each(function(){var a=e(this).find(".wfacp_switcher_checkbox").attr("type");if("hidden"===a||e(this).find(".wfacp_switcher_checkbox").is(":checked")||!(i.length>1)){var t=e(this).attr("cart_key");if(""!==t){var c=e(this).data("item-key"),n=1;e(this).find("input.wfacp_product_switcher_quantity").length>0&&(n=e(this).find("input.wfacp_product_switcher_quantity").val()),o.products[c]=n}else"radio"===a&&1===i.length&&e(this).find(".wfacp_switcher_checkbox").trigger("click")}}):o.products=wfacp_frontend.products_in_cart;var c=e(".woocommerce-remove-coupon");c.length>0&&(o.coupon=c.eq(0).data("coupon")),0!==Object.keys(o.products).length&&(s.block(a),wfacp_send_ajax({action:"update_cart_multiple_page",type:"post",data:o},function(a){window.wfacp_haschanges="no",window.localStorage.setItem("wfacp_checkout_page_id",wfacp_frontend.id),s.unblock(),!0===a.status&&(e("#wfacp_has_active_multi_checkout").val(wfacp_frontend.id),P(a))}))}(t)})}catch(e){}}}(),function(){var a=wfacp_frontend.show_on_next_step_fields,t={address:["billing_first_name","billing_company","billing_address_1","billing_address_2","billing_city","billing_state","billing_postcode","billing_country"],"shipping-address":["shipping_first_name","shipping_company","shipping_address_1","shipping_address_2","shipping_city","shipping_state","shipping_postcode","shipping_country"]},o=e(".wfacp_step_preview");function i(e){var a=e.clone().children().remove().end().text();return""===(a=a.trim())&&(e.find(".required").remove(),a=e.text().trim()),a}function c(a){if("select"===a[0].tagName||"SELECT"===a[0].tagName){if(""!=a.val())return a.find("option:selected").text()}else if("INPUT"==a[0].tagName&&"hidden"==a[0].getAttribute("type")){var t=e(a[0]).siblings("strong");if(t.length>0)return t.text()}}function n(a,i,n){t[a];var r="billing";"shipping-address"===a&&(r="shipping");var s,p="",_=e(".wfacp_divider_"+r).find("#"+r+"_first_name"),d=e(".wfacp_divider_"+r).find("#"+r+"_last_name"),l=e("#"+r+"_address_1"),f=e("#"+r+"_address_2"),u=e("#"+r+"_city"),w=e("#"+r+"_postcode"),h=e("#"+r+"_country"),m=e("#"+r+"_state");if(_.length>0&&""!==_.val()&&(p+=" "+_.val()),d.length>0&&""!==d.val()&&(p+=" "+d.val()),l.length>0&&""!==l.val()&&(""!=p.trim()?p+=", "+l.val():p+=l.val()),f.length>0&&""!==f.val()&&(""!=p.trim()?p+=", "+f.val():p+=f.val()),u.length>0&&""!==u.val()&&(""!=p.trim()?p+=", "+u.val():p+=u.val()),m.length>0&&""!==m.val()&&""==(p+=" "+c(m))&&(p+=" "+m.val()),w.length>0&&""!==w.val()&&(p+=" "+w.val()),h.length>0&&""!==h.val()){var v="";""==(v=c(h))&&(v+=h.val()),""!=p.trim()?p+=", "+v:p+=v}if(""==(s=p))return!1;var g=e(".wfacp_divider_"+r).parents(".wfacp_page").data("step"),y="<div class='single_preview'><div class='single_preview_contents ".concat(a,'\'>\n                                          <div class="single_preview_inner">').concat(wfacp_frontend.fields_label[a],'</div>\n                                          <div class="single_preview_inner">').concat(s,'</div></div>\n                                          <div class="single_preview_change"><a href="javascript:void(0);" data-next-step="').concat(g,'" data-current-step="').concat(n.current_step,'" class="wfacp_preview_step_change">').concat(wfacp_frontend.change_text_preview_fields,"</a></div>                                          \n                                       </div>");return o.append(y),!0}function r(a,t,i){var c="",n=e(".wfacp_shipping_calculator");if(0===n.length)return!1;var r=n.find(".wfacp_shipping_table");if(r.length>0){var s=(r=r.eq(0)).find(".shipping_method:checked");s.length>0&&(c=s.siblings("label").text())}if(""===c)return!1;var p=n.parents(".wfacp_page").data("step"),_="<div class='single_preview'><div class='single_preview_contents ".concat(a,'\'>\n                                          <div class="single_preview_inner wfacp_label">').concat(wfacp_frontend.fields_label.shipping_calculator,'</div>\n                                          <div class="single_preview_inner wfacp_val">').concat(c,'</div></div>\n                                          <div class="single_preview_change">\n                                          <a href="javascript:void(0);" data-next-step="').concat(p,'" data-current-step="').concat(i.current_step,'" class="wfacp_preview_step_change">').concat(wfacp_frontend.change_text_preview_fields,"</a></div>\n                                       </div>");return o.append(_),!0}function s(a,t,c){var n=e("#"+a),r="",s="";if(0===n.length){var p=e("#"+a+"_field");if(0===p.length)return!1;if(p.hasClass("wfacp_custom_field_radio_wrap")){var _=p.find("input:checked");if(0===_.length)return!1;var d=_.attr("id");r=e('label[for="'+d+'"]').text(),s=i(e('label[for="'+a+'"]'))}}else{if("select"===n[0].tagName||"SELECT"===n[0].tagName)r=n.find("option:selected").text();else if("checkbox"===n.attr("type")){if(!0!==n.is(":checked"))return!1;r="On"}else{var l=e(".single_preview_contents.billing_first_name");if(l.length>0&&"billing_last_name"===a&&""!=n.val())return l.find(".wfacp_val").append(" "+n.val()),!1;r=n.val()}s=i(n.parents(".form-row").find("label")),"billing_first_name"===a&&(s=wfacp_frontend.fields_label[a])}if(""!==r){var f=n.parents(".wfacp_page").data("step"),u="<div class='single_preview'><div class='single_preview_contents ".concat(a,'\'>\n                                          <div class="single_preview_inner wfacp_label">').concat(s,'</div>\n                                          <div class="single_preview_inner wfacp_val">').concat(r,'</div></div>\n                                          <div class="single_preview_change">\n                                          <a href="javascript:void(0);" data-next-step="').concat(f,'" data-current-step="').concat(c.current_step,'" class="wfacp_preview_step_change">').concat(wfacp_frontend.change_text_preview_fields,"</a></div>\n                                       </div>");return o.append(u),!0}return!1}function p(t){var i="single_step";"two_step"===t.current_step?i="single_step":"third_step"===t.current_step&&(i="two_step");var c="{}";if(!0===t.last_step){var p=Object.assign({},a.single_step,a.two_step,a.third_step);c=JSON.stringify(p)}else{if(!a.hasOwnProperty(i))return;c=JSON.stringify(a[i])}if(void 0!=c){var _=JSON.parse(c);e(".wfacp_preview_content_box").hide(),o.html("");var d=!1;for(var l in _)if("true"===_[l])if("address"===l||"shipping-address"===l){var f=e("#billing_same_as_shipping"),u=e("#shipping_same_as_billing");if("address"===l&&f.length>0&&!1===f.prop("checked"))continue;if("shipping-address"===l&&u.length>0&&!1===u.prop("checked"))continue;1==n(l,0,t)&&(d=!0)}else"shipping_calculator"===l?1==r(l,0,t)&&(d=!0):1==s(l,0,t)&&(d=!0);!0===d&&e(".wfacp_preview_content_box[data-step='"+t.current_step+"']").show()}}e(document.body).on("wfacp_step_switching",function(e,a){p(a)}),e(document.body).on("click",".wfacp_step_text_have",function(a,t){if(a.preventDefault(),e(this).parent("li").hasClass("wfacp_bred_active")){var o=e(this).parent("li").attr("step");if(""!==o){var i={current_step:o,last_step:!1},c=e(".wfacp_step_text_have");"two_step"===o&&2==c.length?i.last_step=!0:"third_step"===o&&4==c.length&&(i.last_step=!0),p(i)}}})}()}($=jQuery);